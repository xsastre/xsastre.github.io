
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://xsastre.github.io/0.7frameworks.html">
      
      
      
      
      <link rel="icon" href="imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>0.7frameworks - Docencia Xavier</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Condensed:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans Condensed";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frameworks-php-laravel" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="." title="Docencia Xavier" class="md-header__button md-logo" aria-label="Docencia Xavier" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docencia Xavier
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              0.7frameworks
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Cambiar a modo noche"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo noche" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode dia"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode dia" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Docencia Xavier" class="md-nav__button md-logo" aria-label="Docencia Xavier" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Docencia Xavier
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Inici
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Inici
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inici
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DWEC
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            DWEC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Moduls/DWEC/_DWEC2425.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desenvolupament web en entorn client - DAW
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Moduls/DWEC/desenvolupamentfrontend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Desenvolupamet frontend
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AW
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            AW
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Moduls/AW/00.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Temporització aproximada
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Moduls/AW/01.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UT01 Aplicacions web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Moduls/AW/02.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UT02 HTML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<style>
    img { margin: 20px 0; border-radius: 8px; }

    .alert { color: #BD1550; }
    .warning { color: #E97F02; }
    .success { color: #8A9B0F; }

    .center { text-align: center; }
    .right { text-align: right; }

    .img-small { max-width: 200px; margin: auto; }
    .img-medium { max-width: 400px; margin: auto; }
    .img-large { max-width: 800px; margin: auto; }

    .leyenda {
        font-size: small;
        margin: 10px 0;
    }
</style>

<h1 id="frameworks-php-laravel">Frameworks PHP. Laravel<a class="headerlink" href="#frameworks-php-laravel" title="Permanent link">&para;</a></h1>
<h2 id="posada-en-funcionament">Posada en funcionament<a class="headerlink" href="#posada-en-funcionament" title="Permanent link">&para;</a></h2>
<p>Per posar en marxa Laravel us remetré a la pàgina oficial, on es contempla la instal·lació des de distintes perspectives.
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">https://laravel.com/docs/8.x/installation</span>
</code></pre></div></p>
<h2 id="carpetes-en-laravel">Carpetes en Laravel<a class="headerlink" href="#carpetes-en-laravel" title="Permanent link">&para;</a></h2>
<p>En crear un nou projecte amb aquest framework, Laravel crea una sèrie de carpetes per defecte. Aquesta estructura de carpetes és la recomanada per utilitzar Laravel.</p>
<h3 id="public">Public<a class="headerlink" href="#public" title="Permanent link">&para;</a></h3>
<p>Aquesta és la carpeta més important ja que és on es posen tots els fitxers que el client mostrarà a l'usuari quan introduïm la URL del nostre lloc web. Normalment es carrega el fitxer <code>index.php</code> per defecte.</p>
<h3 id="routes">Routes<a class="headerlink" href="#routes" title="Permanent link">&para;</a></h3>
<p>Una altra de les carpetes que més farem servir al llarg d'aquest curs de Laravel. S'hi allotgen totes les rutes (redireccions web) del nostre projecte, però més concretament a l'arxiu <code>web.php</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>Donada una ruta → se carregarà una vista
</code></pre></div>
<h3 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h3>
<p>Aquesta és la nostra carpeta de recursos on guardarem els següents arxius, que també estan separats per les seves carpetes... com cada nom indica:</p>
<ul>
<li><code>css</code> Arxius CSS</li>
<li><code>js</code> Arxius JS (JavaScript)</li>
<li><code>lang</code> Arxius relacionats amb l'idioma del site (variables &amp; strings)</li>
<li><code>views</code> Arxius de les nostres vistes, allò que les rutes carreguen</li>
</ul>
<h2 id="rutes">Rutes<a class="headerlink" href="#rutes" title="Permanent link">&para;</a></h2>
<p>Les rutes a Laravel (i en gairebé qualsevol Framework) serveixen per redireccionar el client (o navegador) a les vistes que nosaltres vulguem.</p>
<p>Aquestes rutes es configuren al fitxer public/routes/web.php on es defineix la ruta que l'usuari posa a la URL després del domini i es retorna la vista que es vol carregar en introduir aquesta adreça al navegador.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// Ruta per defecte per carregar la vista welcome quan l&#39;usuari introdueix simplement el domini</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span><span class="p">});</span>
</code></pre></div>
<p>En l'exemple de dalt anem a carregar la vista anomenada <code>welcome</code> que fa referència a la vista <code>resources/views/welcome.blade.php</code></p>
<h3 id="alies">Alies<a class="headerlink" href="#alies" title="Permanent link">&para;</a></h3>
<p>És interessant donar-li un àlies o un nom a les nostres rutes per poder utilitzar aquests àlies a les nostres plantilles de Laravel que veurem més endavant.</p>
<p>Per això, només cal utilitzar la paraula <code>name</code> al final de l'estructura de la ruta i donar-li un nom que vulguem; normalment descriptiu i associat a la vista que ha de carregar l'encaminador de Laravel.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/users&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">})</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;usuaris&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Després veurem que és molt útil ja que a l'hora de refactoritzar o fer un canvi, si tenim enllaços o menús de navegació que apunten a aquesta ruta, només hauríem de canviar el paràmetre dins del <code>get()</code> i no haver d'anar fitxer per fitxer.</p>
<p>Laravel ens proporciona una manera més còmoda a l'hora de carregar una vista si no volem ni paràmetres ni condicions. Només definirem la següent línia que fa referència la ruta <code>dades</code> a la URL i carregarà el fitxer <code>usuaris.php</code> de la nostra carpeta <code>views</code> com li hem indicat al segon paràmetre.
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="cm">/* http://localhost/dades/ */</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;dades&#39;</span><span class="p">,</span> <span class="s1">&#39;usuaris&#39;</span><span class="p">);</span>
</code></pre></div></p>
<p>Però no només podem retornar una vista, sinó des d'un simple string fins a mòduls propis de Laravel.</p>
<h3 id="parametres">Paràmetres<a class="headerlink" href="#parametres" title="Permanent link">&para;</a></h3>
<p>Ja hem vist que amb PHP podem passar paràmetres a través de la URL, com si fossin variables, que les recuperàvem a través del mètode GET o POST.</p>
<p>Amb Laravel també podem introduir paràmetres però d'una manera més vistosa i ordenada, de manera que sigui visualment més còmode de recordar i d'indexar pels motors de cerca com Google.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>  http://localhost/client/324
</code></pre></div>
<p>Per configurar aquest tipus de rutes en el nostre arxiu de rutes <code>public/routes/web.php</code> farem el següent.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;client/{id}&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">return</span><span class="p">(</span><span class="s1">&#39;Client amb id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">});</span>
</code></pre></div>
<p>Què passa si no introduïm un id i només naveguem fins a <code>client/</code>? ... Ens tornarà un 404</p>
<p>Per resoldre-ho, podem definir una ruta per defecte en cas que l'id (o paràmetre) no sigui passat. Per això farem servir el símbol <code>?</code> en el nostre nom de ruta i inicialitzarem la variable amb el valor que vulguem.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;client/{id?}&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Client amb id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">});</span>
</code></pre></div>
<p>Ara tenim un altre problema, perquè estem filtrant per id del client que, normalment és un número, però si posem un paràmetre que no sigui un número, obtindrem un resultat no desitjat.</p>
<p>Per resoldre aquest cas farem ús de la clàusula <code>where</code> juntament amb una expressió regular númerica.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;client/{id?}&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Client amb id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">})</span> <span class="o">-&gt;</span> <span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">);</span>
</code></pre></div>
<p>A més, podem passar variables a la nostra URL per després utilitzar-les en els nostres fitxers de plantilles o en fitxers <code>.php</code> fent ús d'un array associatiu. Vegem-ne un exemple amb la forma reduïda per estalviar-nos codi.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;dades&#39;</span><span class="p">,</span> <span class="s1">&#39;usuaris&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">5446</span><span class="p">]);</span>
</code></pre></div>
<p>... i l'arxiu <code>resources/views/usuaris.php</code> ha de tenir quelcom parescut a això</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cm">&lt;!-- Estructura típica d&#39;un arxiu HTML5 --&gt;</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Usuari amb id: <span class="cp">&lt;?= $id ?&gt;</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="cm">&lt;!-- ... --&gt;</span>
</code></pre></div>
<p><strong><em>Amb les plantilles de Laravel <code>blade.php</code> veurem com simplificar encara més el nostre codi.</em></strong></p>
<p>Per a més informació sobre les rutes, paràmetres i expressions regulars a les rutes pots fer una ullada a la <a href="https://laravel.com/docs/8.x/routing#route-parameters">documentació oficial de rutes</a> que conté nombrosos exemples.</p>
<h2 id="plantilles-o-templates">Plantilles o Templates<a class="headerlink" href="#plantilles-o-templates" title="Permanent link">&para;</a></h2>
<p>A través de les plantilles de Laravel escriurem menys codi PHP i tindrem els nostres arxius millor organitzats.</p>
<p><strong>Blade</strong> és el sistema de plantilles que porta Laravel, per això els fitxers de plantilles que guardem al directori de <code>views</code> porten l'extensió <code>blade.php</code>.</p>
<p>D'aquesta manera sabem immediatament que es tracta d'una plantilla de Laravel i que forma part d'una vista que es mostrarà al navegador.</p>
<h3 id="directives">Directives<a class="headerlink" href="#directives" title="Permanent link">&para;</a></h3>
<p>Laravel té un gran nombre de directives que podem utilitzar per estalviar-nos molt de codi repetitiu entre altres funcions.</p>
<p>Diguem que les directives són petites funcions ja escrites que accepten paràmetres i que cadascuna fa una funció diferent dins de Laravel.</p>
<ul>
<li><code>@yield</code> Defineix el contingut dinàmic que es carregarà. S'usa conjuntament amb @section</li>
<li><code>@section</code> i <code>@endsection</code> bloc de codi dinàmic</li>
<li><code>@extends</code> importa el contingut d'una plantilla ja creada</li>
</ul>
<h3 id="separant-codi">Separant codi<a class="headerlink" href="#separant-codi" title="Permanent link">&para;</a></h3>
<p>Vegem un exemple de com fer ús del poder de Laravel per crear plantilles i no repetir codi.</p>
<p>Suposem que tenim certes estructures HTML repetides com ara una capçalera <code>header</code>, un menú de navegació <code>nav</code> i un parell de seccions que fan ús d'aquest mateix codi.</p>
<p>Suposem que tenim 2 apartats a la web:</p>
<ul>
<li><code>Blog</code></li>
<li><code>Fotos</code></li>
</ul>
<p>Primer de tot haurem de generar un fitxer que faci de <code>plantilla</code> del nostre lloc web.</p>
<p>Per això creem el fitxer <code>plantilla.blade.php</code> dins del nostre directori de plantilles <code>resources/views</code>.</p>
<p>Aquest fitxer contindrà el típic codi d'una pàgina simple d'HTML i al body afegirem els nostres continguts estàtics i dinàmics.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>    <span class="cm">&lt;!-- CONTINGUT ESTÀTIC PER A TOTES LES SECCIONS --&gt;</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Benvinguts a Laravel<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="cm">&lt;!-- MENÚ --&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="na">route</span><span class="err">(&#39;</span><span class="na">noticies</span><span class="err">&#39;)</span> <span class="err">}}</span><span class="p">&gt;</span>Blog<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> |
<span class="linenos" data-linenos=" 9 "></span>        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="na">route</span><span class="err">(&#39;</span><span class="na">galeria</span><span class="err">&#39;)</span> <span class="err">}}</span><span class="p">&gt;</span>Fotos<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span>    <span class="cm">&lt;!-- CONTINGUT DINÀMIC EN FUNCIÓ DE LA SECCIÓ QUE ES VISITA --&gt;</span>
<span class="linenos" data-linenos="13 "></span>    <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span>        @yield(&#39;apartat&#39;)
<span class="linenos" data-linenos="15 "></span>    <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<p>Cada secció que faci ús d'aquesta plantilla contindrà el text estàtic <code>Benvinguts a Laravel</code> seguit d'un menú de navegació amb enllaços a cadascuna de les seccions i el contingut dinàmic de cada secció.</p>
<p>Ara crearem els fitxers dinàmics de cadascuna de les seccions, en el nostre cas <code>blog.blade.php</code> i <code>fotos.blade.php</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// blog.blade.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartat&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="8 "></span>  <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Estàs</span> <span class="nx">a</span> <span class="nx">BLOG</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="9 "></span><span class="o">@</span><span class="nx">endsection</span>
</code></pre></div>
<p>Importem el contingut de <code>plantilla</code> sota la directiva <code>@extends</code> perquè carregueu els elements estàtics que hem declarat i amb la directiva <code>@section</code> i <code>@endsection</code> definim el bloc de codi dinàmic, en funció de la secció que estiguem visitant.</p>
<p>Ara gairebé el mateix per a la secció de <code>fotos</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// fotos.blade.html</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartat&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="8 "></span>   <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Estàs</span> <span class="nx">a</span> <span class="nx">FOTOS</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="9 "></span><span class="o">@</span><span class="nx">endsection</span>
</code></pre></div>
<p>El darrer pas que ens queda és configurar el fitxer de rutes <code>routes/web.php</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// web.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="s1">&#39;blog&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;noticies&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="6 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;fotos&#39;</span><span class="p">,</span> <span class="s1">&#39;fotos&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;galeria&#39;</span><span class="p">);</span>
</code></pre></div>
<p>D'aquesta manera podrem fer ús del menú de navegació que hem posat a la nostra plantilla i gràcies als àlies <code>noticies</code> i <code>galeria</code>, la URL serà més amigable.</p>
<h3 id="estructures-de-control">Estructures de control<a class="headerlink" href="#estructures-de-control" title="Permanent link">&para;</a></h3>
<p>Com en tot bon llenguatge de programació, a Laravel també tenim estructures de control.</p>
<p>A Blade (plantilles de Laravel) sempre que iniciem un bloc d'estructura de control HEM de tancar-la</p>
<ul>
<li><code>@foreach</code> ~ <code>@endforeach</code> el fem servir per recórrer arrays</li>
<li><code>@if</code> ~ <code>@endif</code> per comprovar condicions lògiques</li>
<li><code>@switch</code> ~ <code>@endswitch</code> en funció del valor d'una variable executar un codi<ul>
<li><code>@case</code> defineix la casuística del switch</li>
<li><code>@break</code> trenca l'execució del codi en curs</li>
<li><code>@default</code> si cap casuística es compleix</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$equip</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Maria&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfredo&#39;</span><span class="p">,</span> <span class="s1">&#39;William&#39;</span><span class="p">,</span> <span class="s1">&#39;Veronica&#39;</span><span class="p">];</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="o">@</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$equip</span> <span class="k">as</span> <span class="nv">$nom</span><span class="p">)</span>
<span class="linenos" data-linenos="6 "></span>   <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span> <span class="p">{{</span> <span class="nv">$nom</span> <span class="p">}}</span> <span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="7 "></span><span class="o">@</span><span class="k">endforeach</span>
</code></pre></div>
<p>Recordeu-vos que podem passar variables a través de les rutes com si fossin paràmetres. Però en aquest cas, veurem una altra directiva més; l'ús de <code>@compact</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// Ús de @compact</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$equip</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Maria&#39;</span><span class="p">,</span> <span class="s1">&#39;Alfredo&#39;</span><span class="p">,</span> <span class="s1">&#39;William&#39;</span><span class="p">,</span> <span class="s1">&#39;Veronica&#39;</span><span class="p">];</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="c1">// Route::view(&#39;nosaltres&#39;, [&#39;equip&#39; =&gt; &#39;equip&#39;]);</span>
<span class="linenos" data-linenos="7 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;nosaltres&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;equip&#39;</span><span class="p">));</span>
</code></pre></div>
<h2 id="controladors">Controladors<a class="headerlink" href="#controladors" title="Permanent link">&para;</a></h2>
<p>Els controladors són el lloc perfecte per definir la lògica de negoci de la nostra aplicació o lloc web.</p>
<p>Fa intermediari entre la vista (el que veiem amb el nostre navegador o client) i el servidor on l'app està allotjada.</p>
<p>Per defecte, els controladors es guarden en una carpeta específica situada a <code>app/Http/Controllers</code> i tenen extensió <code>.php</code>.</p>
<p>Per crear un controlador nou hem de fer ús del nostre estimat autòmat <code>artisan</code> on us direm que creeu un controlador amb el nom que nosaltres vulguem.</p>
<p>Obrim la consola i ens situem a l'arrel del nostre projecte</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan make:controller PagesController</span>
</code></pre></div>
Si tot ha sortit bé, rebrem un missatge per consola amb què tot ha anat bé i podrem comprovar que, efectivament, s'ha creat el fitxer <code>PagesController.php</code> amb una estructura bàsica de controlador, dins de la carpeta <code>Controllers</code> que hem descrit anteriorment.</p>
<p>Ara podem modificar el nostre fitxer de rutes <code>web.pbp</code> per deixar-lo net de lògica i traslladar aquesta al nostre nou controlador.</p>
<p>La idea és deixar el fitxer <code>web.php</code> tan net com puguem perquè, d'una ullada, s'entengui tot perfectament.</p>
<p><strong>RECORDA</strong> que només movem la lògica, mentre que les clàusules com <code>where</code> i <code>name</code> les seguim deixant a l'arxiu de rutes <code>web.php</code></p>
<p>Vegem com quedaria un refactor del fitxer de rutes utilitzant un <code>Controller</code> com el que acabem de crear</p>
<p>Ara ens quedaria de la manera següent</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// web.php (v2.0) ▒▒▒▒ Refactoritzat</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">App\Http\Controllers\PagesController</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;inici&#39;</span> <span class="p">]);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;dades&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;dades&#39;</span> <span class="p">]);</span>
<span class="linenos" data-linenos="10 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;client/{id?}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;client&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">where</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;nosaltres/{nosaltres?}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;nosaltres&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;nosaltres&#39;</span><span class="p">);</span>
</code></pre></div>
<p>i al nostre arxiu controlador el deixaríem de la següent manera</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// PagesController.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">PagesController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>     <span class="k">public</span> <span class="k">function</span> <span class="nf">inici</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">);</span> <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>     <span class="k">public</span> <span class="k">function</span> <span class="nf">dades</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>         <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;usuaris&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">56</span><span class="p">]);</span>
<span class="linenos" data-linenos="13 "></span>     <span class="p">}</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>     <span class="k">public</span> <span class="k">function</span> <span class="nf">client</span><span class="p">(</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="16 "></span>         <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;Client amb id: &#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos="17 "></span>     <span class="p">}</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span>     <span class="k">public</span> <span class="k">function</span> <span class="nf">nosaltres</span><span class="p">(</span><span class="nv">$nom</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="20 "></span>         <span class="nv">$equip</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos" data-linenos="21 "></span>             <span class="s1">&#39;Paco&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="22 "></span>             <span class="s1">&#39;Enrique&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="23 "></span>             <span class="s1">&#39;Maria&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="24 "></span>             <span class="s1">&#39;Veronica&#39;</span>
<span class="linenos" data-linenos="25 "></span>         <span class="p">];</span>
<span class="linenos" data-linenos="26 "></span>
<span class="linenos" data-linenos="27 "></span>         <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;nosaltres&#39;</span><span class="p">,</span> <span class="o">@</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;equip&#39;</span><span class="p">,</span> <span class="s1">&#39;nom&#39;</span><span class="p">));</span>
<span class="linenos" data-linenos="28 "></span>     <span class="p">}</span>
<span class="linenos" data-linenos="29 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="migracions-eloquent">Migracions &amp; Eloquent<a class="headerlink" href="#migracions-eloquent" title="Permanent link">&para;</a></h2>
<p>Amb les migracions gestionarem la base de dades del nostre lloc web; tant crear noves BBDD com editar-les des de Laravel.</p>
<p>Les migracions d'un lloc fet amb Laravel s'allotgen a la ruta <code>database/migrations</code> i tenen extensió <code>.php</code>.</p>
<p>Si t'hi fixes, només instal·lar Laravel amb la imatge de Bitnami, s'han creat diversos arxius de migracions que podem fer servir, però de moment els deixem aquí i <strong>NO ELS ESBORREM</strong> perquè són molt útils.</p>
<h3 id="fitxers-env">Fitxers .env<a class="headerlink" href="#fitxers-env" title="Permanent link">&para;</a></h3>
<p>És d'ús comú treballar amb arxius d'entorn anomenats també fitxers .env. Normalment, un projecte real pots trobar-te amb diversos arxius d'aquest tipus en funció del desplegament que es vulgui fer; com per exemple:</p>
<ul>
<li><code>test.env</code> config. per desplegar en entorn segur de proves</li>
<li><code>release.env</code> config. per desplegar canvis de versió que s'envia als <em>beta testers</em></li>
<li><code>production.env</code>config. per desplegar el codi ja provat a la resta del món.</li>
</ul>
<p>En el nostre cas, com que no desplegarem res, només farem servir un únic fitxer <code>.env</code> i en qüestió de les migracions ens fixarem a partir de la línia 11 on diu:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">DB_CONNECTION=mysql</span>
<span class="linenos" data-linenos="2 "></span><span class="go">DB_HOST=127.0.0.1</span>
<span class="linenos" data-linenos="3 "></span><span class="go">DB_PORT=3306</span>
<span class="linenos" data-linenos="4 "></span><span class="go">DB_DATABASE=blog</span>
<span class="linenos" data-linenos="5 "></span><span class="go">DB_USERNAME=root</span>
<span class="linenos" data-linenos="6 "></span><span class="go">DB_PASSWORD=</span>
</code></pre></div>
<p>En aquest fitxer hem de configurar les dades del nostre servidor MySQL i emplenar-lo amb la informació corresponent a la nostra base de dades <span class="alert"><strong><em>ja creada</em></strong></span></p>
<p>Un cop tinguem això, el que ens queda és executar l'ordre de les migracions a través del CLI <code>artisan</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan migrate</span>
</code></pre></div>
<p>Si tot ha sortit bé obtindrem el resultat següent on podrem observar que totes les migracions s'han inserit correctament a la base de dades.</p>
<div class="center img-large">
     <img src="./imagenes/07/migracions.png">
</div>

<p>Si anem al client que utilitzem per manejar la base de dades (phpMyAdmin per exemple) veurem que a la nostra base de dades s'han creat totes les taules de la migració que hem executat i <strong>a més</strong> una taula que s'anomena <span class="success"><strong><em>migrations</em></strong></span>.</p>
<p>La taula <code>migrations</code> és simplement un registre de totes les migracions dutes a terme. A més, podem fer un <strong><em>rollback</em></strong> en cas que vulguem restablir la nostra base de dades.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan migrate:rollback</span>
</code></pre></div>
<p>O si preferim fer un reset per deixar-la neta</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan migrate:reset</span>
</code></pre></div>
<h3 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h3>
<p>Gràcies a Eloquent i la seva integració amb Laravel, podrem crear models de dades d'una manera automatitzada a través de <code>artisan</code></p>
<p>Ara que ja sabem fer servir les migracions és hora de crear les nostres pròpies migracions però a través d'Eloquent.</p>
<p>A través de la instrucció <code>make:model</code> creem un nou model de dades, a continuació posem el nom <span class="alert"><strong><em>sempre començant a Majúsucla ia SINGULAR</em></strong></span> i passem el paràmetre relacionat amb les migracions <code>-m</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan make:model Nota -m</span>
</code></pre></div>
<p>Si tot ha sortit bé, veurem al nostre directori de migracions <code>database/migrations</code> un nou fitxer que s'anomena <code>2022_01_07_81237_create_notas_table.php</code>.</p>
<p>El següent pas és veure el nostre fitxer de migracions i editar-lo perquè contingui les taules que nosaltres vulguem. Si ho visualitzem tan sols tindreu l'estructura bàsica amb un parell de taules. Hi afegirem un parell de taules més.</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>   <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
<span class="linenos" data-linenos="5 "></span>   <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span>   <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="8 "></span>   <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="s1">&#39;descripcio&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="9 "></span><span class="p">});</span>
</code></pre></div>
En aquesta <code>Schema</code> podem posar totes les taules que nosaltres vulguem i establir el tipus de dada per a cadascuna, així com el nom.</p>
<p>Quan estem satisfets amb el nostre esquema hem de tornar a executar el codi de migració a través d'artisan perquè s'introdueixi aquesta nova informació a la base de dades.</p>
<p>Per veure tots els tipus de dades que maneja Eloquent pots visitar la <a href="https://laravel.com/docs/5.0/schema#adding-columns">documentació oficial</a>.</p>
<h3 id="recuperant-dades">Recuperant dades<a class="headerlink" href="#recuperant-dades" title="Permanent link">&para;</a></h3>
<p>Ja tenim la nostra base de dades creada amb les nostres taules migrades, ara només falta emplenar aquestes taules amb dades per poder pintar-les al nostre codi HTML.</p>
<p>Omplim les taules a través del client de MySQL que més ens agradi:</p>
<ul>
<li>PHP MyAdmin</li>
<li><a href="https://www.mysql.com/products/workbench/">MySQL Workbench</a></li>
<li><a href="https://www.heidisql.com/download.php">HeidiSQL</a> *</li>
<li><a href="http://www.squirrelsql.org/#installation">SquirrelSQL</a></li>
</ul>
<p>Ara haurem d'anar-nos a una vista ja creada o en creem una de nova i sol·licitem les dades des de l'HTML.</p>
<p>Ens recordem del <code>PagesController</code>? doncs fer ús de la seva màgia juntament amb les rutes que creem a <code>web.php</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ web.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;notes&#39;</span> <span class="p">]);</span>
</code></pre></div>
<p>Abans d'intentar entrar, hem de configurar el nostre controlador de la manera següent:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">public</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">function</span> <span class="nf">notes</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>   <span class="nv">$notes</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">all</span><span class="p">();</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">));</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
<p>L'últim pas seria crear la vista amb la taula que pinti les dades a través de la variable que li passem per paràmetre a la ruta que acabem de descriure.</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ notes.blade.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Notes</span> <span class="nx">des</span> <span class="nx">de</span> <span class="nx">base</span> <span class="nx">de</span> <span class="nx">dades</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="o">&lt;</span><span class="nx">table</span> <span class="nx">border</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>     <span class="o">&lt;</span><span class="nx">thead</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>         <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="10 "></span>             <span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Nom</span><span class="o">&lt;/</span><span class="nx">th</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="11 "></span>             <span class="o">&lt;</span><span class="nx">th</span><span class="o">&gt;</span><span class="nx">Descripció</span><span class="o">&lt;/</span><span class="nx">th</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="12 "></span>         <span class="o">&lt;/</span><span class="nx">tr</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="13 "></span>     <span class="o">&lt;/</span><span class="nx">thead</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>     <span class="o">@</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$notes</span> <span class="k">as</span> <span class="nv">$nota</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>         <span class="o">&lt;</span><span class="nx">tr</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="17 "></span>             <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">nom</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="18 "></span>             <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">descripció</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">td</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="19 "></span>         <span class="o">&lt;/</span><span class="nx">tr</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="20 "></span>     <span class="o">@</span><span class="k">endforeach</span>
<span class="linenos" data-linenos="21 "></span><span class="o">&lt;/</span><span class="nx">table</span><span class="o">&gt;</span>
</code></pre></div>
Cal fixar-se bé en els noms de les columnes que tenen les nostres bases de dades, és just el que va després de <code>-&gt;</code> i sempre envoltat pels símbols <code>{{}}</code> ja que estem en un fitxer de plantilla.</p>
<p>Què passaria si només volem accedir a un únic element? com si féssim un <code>SELECT * from usuaris where id = 1</code></p>
<p>Per això, tenim una instrucció específica a Eloquent que ens soluciona el problema. En aquest cas farem servir la instrucció <code>findOrFail</code> i com a bons usuaris de Laravel, l'utilitzarem dins del controlador.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">detall</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>   <span class="nv">$nota</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span>
<span class="linenos" data-linenos="8 "></span>   <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notes.detall&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;nota&#39;</span><span class="p">));</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<p>Cal recordar que hem de configurar la ruta al nostre arxiu de rutes.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ web.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;notes/{id?}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;detall&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notes.detall&#39;</span><span class="p">);</span>
</code></pre></div>
<p>I finalment, hem de crear la plantilla, però com que és un fitxer de detall o que està relacionat amb una altra plantilla ja creada, podem crear una carpeta amb el nom de la plantilla i dins, el fitxer de plantilla en qüestió.</p>
<p>De manera que quedaria així <code>resources/views/notas/detalle.blade.php</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ detalle.blade.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartat&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 8 "></span>     <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Detall</span> <span class="nx">de</span> <span class="nx">la</span> <span class="nx">nota</span><span class="o">&lt;/</span><span class="nx">h1</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>     <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">ID</span><span class="o">:</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">id</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="11 "></span>     <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Nom</span><span class="o">:</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">nom</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="12 "></span>     <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Descripció</span><span class="o">:</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">descripció</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h3</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="13 "></span><span class="o">@</span><span class="nx">endsection</span>
</code></pre></div>
<h3 id="modificar-taules-sense-perdre-dades">Modificar taules sense perdre dades<a class="headerlink" href="#modificar-taules-sense-perdre-dades" title="Permanent link">&para;</a></h3>
<p>Un dels dilemes que tenim a l'hora de manejar les bases de dades amb Laravel i Eloquent, és que de vegades cometem errors i volem introduir una nova columna dins la nostra taula o modificar-ne una <span class="alert"> <strong><em>SENSE PERDRE LES DADES DE LA BASE DE DADES</em></strong></span>.</p>
<p>Imaginem que a la nostra taula <code>notes</code> volem afegir una columna amb el nom <code>autor</code>.</p>
<p>El primer de tot és crear una nova migració per fer aquest canvi. Per fer-ho, farem ús del nostre estimat <code>artisan</code> i hem de crear el nom dʻaquesta migració amb la següent fórmula <code>add_fields_to_</code> seguidament del nom de la taula que volem modificar.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan migrate add_fields_to_nota</span>
</code></pre></div>
<p>Seguidament, ens fiquem a l'arxiu de la migració que acabem de crear ia l'apartat up() hem de posar el canvi que volem fer ia la secció down() hem de fer el mateix però hem de dir a l'Eloquent que l'elimini per què? per en cas de fer migrate rollback, es carregui aquest nou camp que hem creat.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>   <span class="nx">Schema</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>       <span class="nv">$table</span> <span class="o">-&gt;</span> <span class="na">string</span><span class="p">(</span><span class="s1">&#39;autor&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span>   <span class="p">});</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
<span class="linenos" data-linenos="11 "></span><span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>   <span class="nx">Schema</span><span class="o">::</span><span class="na">table</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>       <span class="nv">$table</span> <span class="o">-&gt;</span> <span class="na">dropColumn</span><span class="p">(</span><span class="s1">&#39;autor&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span>   <span class="p">});</span>
<span class="linenos" data-linenos="15 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="formularis">Formularis<a class="headerlink" href="#formularis" title="Permanent link">&para;</a></h2>
<p>Ara que ja sabem com carregar una base de dades, veurem com inserir-los amb Laravel i sense escriure ni una sola línia de SQL.</p>
<p>Gràcies al mètode <code>save()</code> de Laravel podrem desar dades que provinguin d'un formulari des de les nostres plantilles. Per això, el primer que necessitem el següent:</p>
<ul>
<li><code>formulari HTML</code> que arreplegue les dades que l'usuari introdueix</li>
<li>Una <code>ruta</code> que sigui l'encarregada de rebre les dades del formulari</li>
<li>Mètode <code>POST</code> per enviar les dades al servidor</li>
<li>Un mètode al nostre <code>controlador</code> que processi les dades i les guardi a través de <code>save()</code></li>
<li>La clàusula de seguretat <code>@csrf</code> per evitar atacs des d'altres llocs</li>
</ul>
<p>Així doncs, comencem pel formulari</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;{{ route(&#39;notes.crear&#39;) }}&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>     @csrf {{-- Clàusula per obtenir un token de formulari en enviar-lo --}}
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span>     <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;nom&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nom de la nota&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control mb-2&quot;</span> <span class="na">autofocus</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>     <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;descripcio&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Descripció de la nota&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control mb-2&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>     <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-primary btn-block&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>       Crear nova nota
<span class="linenos" data-linenos=" 9 "></span>     <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
<p>Com veiem, creem 2 inputs relacionats amb les nostres columnes dins de la taula, en aquest cas <code>nom</code> i <code>descripció</code></p>
<p>El <code>action</code> del formulari ha d'apuntar a una nova ruta que crearem i on enviem les dades mitjançant <code>POST</code>.</p>
<p>Ara crearem la ruta al nostre arxiu de rutes <code>web.php</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ web.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;crear&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notes.crear&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Si ens fixem, ja no estem fent ús del <code>get</code>sinó del mètode <code>post</code> i com que són mètodes diferents, podem anomenar la ruta de la mateixa manera que a <code>get</code> ja que no hi haurà conflicte.</p>
<p>D'altra banda, necessitem invocar el nostre <code>PagesController</code> famós i dir-li que utilitzarem el mètode <code>crear</code> que bé, encara no existeix però que crearem a continuació. No oblidem crear un àlies per poder vincular-lo al <code>action</code> del formulari <span class="alert"><strong><em>SUPER IMPORTANT</em></strong></span>.</p>
<p>Per acabar, editarem el nostre fitxer <code>PagesController.php</code> perquè el controlador que estem usant tingui el mètode que hem anomenat prèviament.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">App\Models\Nota</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">crear</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>     <span class="nv">$notaNova</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Nota</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>     <span class="nv">$notaNova</span> <span class="o">-&gt;</span> <span class="na">nom</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">nom</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>     <span class="nv">$notaNova</span> <span class="o">-&gt;</span> <span class="na">descripcio</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">descripcio</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>     <span class="nv">$notaNova</span> <span class="o">-&gt;</span> <span class="na">save</span><span class="p">();</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span>     <span class="k">return</span> <span class="nx">back</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">with</span><span class="p">(</span><span class="s1">&#39;missatge&#39;</span><span class="p">,</span> <span class="s1">&#39;Nota agregada amb èxit&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="17 "></span><span class="p">}</span>
</code></pre></div>
<p>El nostre mètode <code>crear</code> rebrà un objecte anomenat <code>$request</code> (el qual podem canviar-li el nom perfectament) de tipus <code>Request</code> pel que <span class="alert"><strong><em>HEM DE IMPORTAR Request</em></strong>&lt; /span&gt; per poder utilitzar aquesta classe de Laravel.</p>
<p>Dins del mètode <code>crear</code> que acabem d‟escriure, hem de fer ús del model <code>Nota</code> que ja creem en altres exemples i instanciar-la a través d‟una variable, en el nostre cas <code>$notaNueva</code>.</p>
<p>D'aquesta manera, podrem accedir als mètodes i propietats de la mateixa, per això podem utilitzar <code>nom</code> i <code>descripcio</code>.</p>
<p>Així mateix, la variable <code>$request</code> està formada pels mateixos noms de <code>input</code> que hem posat al formulari de la plantilla, si us acordeu eren <code>name="nom"</code> i <code>name="descripcio"</code>.</p>
<p>Finalment fem servir el mètode <code>save()</code> per desar aquestes noves dades a la base de dades i retornem a la pàgina del formulari amb el mètode <code>back()</code> afegint un missatge amb <code>with()</code>.</p>
<p>Però, on sortirà aquest missatge? -- ho hem de declarar a la nostra plantilla</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>@if (session(&#39;missatge&#39;))
<span class="linenos" data-linenos="2 "></span>   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;missatge-nota-creada&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="3 "></span>       {{ session(&#39;missatge&#39;) }}
<span class="linenos" data-linenos="4 "></span>   <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="5 "></span>@endif
</code></pre></div>
<h3 id="validacions">Validacions<a class="headerlink" href="#validacions" title="Permanent link">&para;</a></h3>
<p>Laravel ens proporciona eines per poder validar les dades que l'usuari introdueix als camps del formulari.</p>
<p>A més de poder-ho fer amb l'etiqueta <code>required</code> d'HTML5, hem de validar les dades a través del Framework.</p>
<p>Per això, necessitem modificar diversos elements:</p>
<ul>
<li>En primer lloc, el nostre arxiu <code>controller</code></li>
<li>En segon lloc, la nostra <code>plantilla</code> que carrega el formulari</li>
</ul>
<p>Comencem amb el controlador. A través del mètode <code>validate()</code> us diem a Eloquent quins camps són requerits per poder enviar el formulari. Farem servir un array associatiu amb el nom de l'input i la paraula reservada <code>required</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">validate</span><span class="p">([</span>
<span class="linenos" data-linenos="6 "></span>   <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="7 "></span>   <span class="s1">&#39;descripcio&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span>
<span class="linenos" data-linenos="8 "></span><span class="p">]);</span>
</code></pre></div>
<p>Seguidament ens mourem a la plantilla on estigui el formulari ia través de la directiva <code>@error</code> crearem un bloc html amb el nostre missatge dʻerror per cadascun dels inputs requerits.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ notes.blade.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="o">@</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="6 "></span>     <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="7 "></span>       <span class="nx">No</span> <span class="nx">oblidis</span> <span class="nx">emplenar</span> <span class="nx">el</span> <span class="nx">nom</span>
<span class="linenos" data-linenos="8 "></span>     <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="9 "></span><span class="o">@</span><span class="nx">enderror</span>
</code></pre></div>
<p>Però què passa quan hi ha hagut un error i ens mostra el missatge que hem escrit? Si t'hi fixes, els camps que havies emplenat perdran la informació, però amb Laravel els podem persistir sense fer que l'usuari torni a introduir-los.</p>
<p>Per poder persistir les dades un cop enviades però amb algun error de camp requerit, utilitzarem la directiva <code>old()</code> com a value de l'input dins del nostre formulari i us passarem el nom de l'input declarat a l'etiqueta <code>name</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ notes.blade.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="o">&lt;</span><span class="nx">input</span>
<span class="linenos" data-linenos=" 6 "></span>   <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
<span class="linenos" data-linenos=" 7 "></span>   <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;nom&quot;</span>
<span class="linenos" data-linenos=" 8 "></span>   <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;{{ old(&#39;nom&#39;) }}&quot;</span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;form-control mb-2&quot;</span>
<span class="linenos" data-linenos="10 "></span>   <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Nom de la nota&quot;</span>
<span class="linenos" data-linenos="11 "></span>   <span class="nx">autofocus</span>
<span class="linenos" data-linenos="12 "></span><span class="o">&gt;</span>
</code></pre></div>
<h3 id="editant-registres">Editant registres<a class="headerlink" href="#editant-registres" title="Permanent link">&para;</a></h3>
<p>Després de tenir camps a la base de dades, seria interessant poder editar-los a través d'un formulari.</p>
<p>Laravel ens proporciona les eines necessàries; vegem doncs el que necessitem per poder fer el canvi a través de la directiva <code>put()</code>.</p>
<p>Per poder fer el canvi de registres necessitem el següent:</p>
<ul>
<li>Un enllaç per redirigir a la pàgina d'editar, passant l'ID de l'element en qüestió</li>
<li>Una nova <code>ruta</code> que apunti a la nostra plantilla d'editar</li>
<li>Una <code>plantilla</code> per poder editar amb un formulari que rebi les dades a editar</li>
<li>Una nova funció dins del nostre <code>controlador</code> per poder manejar les dades ja introduïdes</li>
<li>Una nova <code>ruta</code> que utilitzi el mètode <code>put()</code> per poder actualitzar les dades</li>
<li>Un nou mètode dins del nostre <code>controlador</code> per actualitzar les dades noves introduïdes</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ notes.blade.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;{{ route(&#39;notes.editar&#39;, </span><span class="si">$nota</span><span class="s2">) }}&quot;</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;btn btn-warning btn-sm&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="6 "></span>   <span class="nx">Edita</span>
<span class="linenos" data-linenos="7 "></span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
</code></pre></div>
<p>Ara creem la ruta</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ wep.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;editar/{id}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;editar&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notes.editar&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="6 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">put</span><span class="p">(</span><span class="s1">&#39;editar/{id}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;actualitzar&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notes.actualitzar&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Ara necessitem crear una nova plantilla <code>resources/views/notas/editar.blade.php</code></p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ editar.blade.php</span>
<span class="linenos" data-linenos=" 4 "></span><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;plantilla&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;apartat&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 7 "></span><span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Editant</span> <span class="nx">la</span> <span class="nx">nota</span> <span class="p">{{</span> <span class="nv">$nota</span> <span class="o">-&gt;</span> <span class="na">id</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="o">@</span><span class="k">if</span> <span class="p">(</span><span class="nx">session</span><span class="p">(</span><span class="s1">&#39;missatge&#39;</span><span class="p">))</span>
<span class="linenos" data-linenos="10 "></span>   <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-success&quot;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">session</span><span class="p">(</span><span class="s1">&#39;missatge&#39;</span><span class="p">)}}</span><span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="o">@</span><span class="k">endif</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;{{ route(&#39;notes.actualitzar&#39;, </span><span class="si">$nota</span><span class="s2"> -&gt; id) }}&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="14 "></span>   <span class="o">@</span><span class="nx">method</span><span class="p">(</span><span class="s1">&#39;PUT&#39;</span><span class="p">)</span> <span class="p">{{</span><span class="o">--</span> <span class="nx">Necessitem</span> <span class="nx">canviar</span> <span class="nx">el</span> <span class="nx">mètode</span> <span class="nx">PUT</span> <span class="nx">per</span> <span class="nx">editar</span> <span class="o">--</span><span class="p">}}</span>
<span class="linenos" data-linenos="15 "></span>   <span class="o">@</span><span class="nx">csrf</span> <span class="p">{{</span><span class="o">--</span> <span class="nx">Clàusula</span> <span class="nx">per</span> <span class="nx">obtenir</span> <span class="nx">un</span> <span class="nx">token</span> <span class="nx">de</span> <span class="nx">formulari</span> <span class="nx">en</span> <span class="nx">enviar</span><span class="o">-</span><span class="nx">lo</span> <span class="o">--</span><span class="p">}}</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span>   <span class="o">@</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="18 "></span>       <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="19 "></span>           <span class="nx">El</span> <span class="nx">nom</span> <span class="nx">és</span> <span class="nx">obligatori</span>
<span class="linenos" data-linenos="20 "></span>       <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="21 "></span>   <span class="o">@</span><span class="nx">enderror</span>
<span class="linenos" data-linenos="22 "></span>   <span class="o">@</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;descripcio&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="23 "></span>       <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="24 "></span>           <span class="nx">La</span> <span class="nx">descripció</span> <span class="nx">és</span> <span class="nx">obligatòria</span>
<span class="linenos" data-linenos="25 "></span>       <span class="o">&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="26 "></span>   <span class="o">@</span><span class="nx">enderror</span>
<span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span>   <span class="o">&lt;</span><span class="nx">input</span>
<span class="linenos" data-linenos="29 "></span>       <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
<span class="linenos" data-linenos="30 "></span>       <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;nom&quot;</span>
<span class="linenos" data-linenos="31 "></span>       <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;form-control mb-2&quot;</span>
<span class="linenos" data-linenos="32 "></span>       <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;{{ </span><span class="si">$nota</span><span class="s2"> -&gt; nom }}&quot;</span>
<span class="linenos" data-linenos="33 "></span>       <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Nom de la nota&quot;</span>
<span class="linenos" data-linenos="34 "></span>       <span class="nx">autofocus</span>
<span class="linenos" data-linenos="35 "></span>   <span class="o">&gt;</span>
<span class="linenos" data-linenos="36 "></span>   <span class="o">&lt;</span><span class="nx">input</span>
<span class="linenos" data-linenos="37 "></span>       <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span>
<span class="linenos" data-linenos="38 "></span>       <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;descripcio&quot;</span>
<span class="linenos" data-linenos="39 "></span>       <span class="nx">placeholder</span><span class="o">=</span><span class="s2">&quot;Descripció de la nota&quot;</span>
<span class="linenos" data-linenos="40 "></span>       <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;form-control mb-2&quot;</span>
<span class="linenos" data-linenos="41 "></span>       <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;{{ </span><span class="si">$nota</span><span class="s2"> -&gt; descripció }}&quot;</span>
<span class="linenos" data-linenos="42 "></span>   <span class="o">&gt;</span>
<span class="linenos" data-linenos="43 "></span>
<span class="linenos" data-linenos="44 "></span>   <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;btn btn-primary btn-block&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="o">&gt;</span><span class="nx">Desa</span> <span class="nx">els</span> <span class="nx">canvis</span><span class="o">&lt;/</span><span class="nx">button</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="45 "></span><span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="46 "></span><span class="o">@</span><span class="nx">endsection</span>
</code></pre></div>
I per últim, modifiquem el nostre <code>PagesController</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">editar</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>   <span class="nv">$nota</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span>   <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notes.editar&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;nota&#39;</span><span class="p">));</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">actualitzar</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>   <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">validate</span><span class="p">([</span>
<span class="linenos" data-linenos="13 "></span>       <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="14 "></span>       <span class="s1">&#39;descripcio&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;required&#39;</span>
<span class="linenos" data-linenos="15 "></span>   <span class="p">]);</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span>   <span class="nv">$notaActualitza</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span>   <span class="nv">$notaActualitzar</span> <span class="o">-&gt;</span> <span class="na">nom</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">nom</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span>   <span class="nv">$notaActualitzar</span> <span class="o">-&gt;</span> <span class="na">descripcio</span> <span class="o">=</span> <span class="nv">$request</span> <span class="o">-&gt;</span> <span class="na">descripcio</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>   <span class="nv">$notaActualitzar</span> <span class="o">-&gt;</span> <span class="na">save</span><span class="p">();</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span>   <span class="k">return</span> <span class="nx">back</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">with</span><span class="p">(</span><span class="s1">&#39;missatge&#39;</span><span class="p">,</span> <span class="s1">&#39;Nota actualitzada&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="25 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="eliminant-registres">Eliminant registres<a class="headerlink" href="#eliminant-registres" title="Permanent link">&para;</a></h3>
<p>A l'hora d'eliminar un registre nou, no necessitem crear una plantilla nova ja que podem enviar la instrucció directament a través d'un altre formulari.</p>
<p>Per tant, per eliminar un registre de la base de dades utilitzarem el següent.</p>
<ul>
<li>Un formulari bàsic amb un únic botó d'eliminar</li>
<li>Usarem el mètode <code>DELETE</code> per sobreescriure el mètode del formulari HTML</li>
<li>Una <code>ruta</code> nova per controlar lʻaction dʻaquest nou formulari</li>
<li>Un nou mètode dins del nostre <code>Controlador</code> que porti la lògica per esborrar el registre</li>
</ul>
<p>Veurem com ficar aquest formulari dins del nostre llistat de notes</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ notes.blade.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;{{ route(&#39;notes.eliminar&#39;, </span><span class="si">$nota</span><span class="s2">) }}&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;d-inline&quot;</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>   <span class="o">@</span><span class="nx">method</span><span class="p">(</span><span class="s1">&#39;DELETE&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 7 "></span>   <span class="o">@</span><span class="nx">csrf</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&quot;btn btn-danger btn-sm&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span><span class="o">&gt;</span><span class="nx">Eliminar</span><span class="o">&lt;/</span><span class="nx">button</span><span class="o">&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>
</code></pre></div>
Ara que ja tenim muntat el formulari a la nostra plantilla, passem a crear la ruta que hem col·locat al <code>action</code> del formulari per esborrar elements.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// estem a ▓▓▓ web.php</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nx">Route</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="s1">&#39;eliminar/{id}&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">PagesController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;eliminar&#39;</span> <span class="p">])</span> <span class="o">-&gt;</span> <span class="na">name</span><span class="p">(</span><span class="s1">&#39;notes.eliminar&#39;</span><span class="p">);</span>
</code></pre></div>
<p>El darrer pas que ens queda és modificar el PagesController</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">eliminar</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>   <span class="nv">$notaElimina</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span>   <span class="nv">$notaElimina</span> <span class="o">-&gt;</span> <span class="na">delete</span><span class="p">();</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="k">return</span> <span class="nx">back</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">with</span><span class="p">(</span><span class="s1">&#39;missatge&#39;</span><span class="p">,</span> <span class="s1">&#39;Nota Eliminada&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
<p>Si tot ha sortit bé, haurem creat un lloc a Laravel i Eloquent que és capaç de fer un <strong><em>CRUD</em></strong> validant camps en formularis i inserint dades reals a una base de dades.</p>
<h2 id="paginacio">Paginació<a class="headerlink" href="#paginacio" title="Permanent link">&para;</a></h2>
<p>Per afegir paginació als nostres resultats, Eloquent té un mètode que s'anomena <code>paginate()</code> on li passem un nombre enter com a paràmetre per indicar-li el nombre de resultats que volem per pàgina.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// estem a ▓▓▓ PagesController.php</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">notes</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>   <span class="c1">// $notes = Nota::all();</span>
<span class="linenos" data-linenos=" 7 "></span>   <span class="nv">$notes</span> <span class="o">=</span> <span class="nx">Nota</span><span class="o">::</span><span class="na">paginate</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;notes&#39;</span><span class="p">));</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
<p>Ara veurem certs elements HTML que s'han generat a la nostra vista, això és perquè Laravel fa ús d'una llibreria de paginació situada a la carpeta <code>vendor/laravel/framework/src/illuminate/Pagination</code></p>
<p>Si us fiqueu al directori i obriu l'arxiu <code>tailwind.blade.php</code> veureu l'estructura HTML que us surt a la vista. Podeu modificar aquest arxiu al vostre gust, però és recomanable guardar-ne una còpia.</p>
<p>Hi ha una altra dependència a <code>resources/lang/en/pagination.php</code> on trobaràs l'idioma per a la paginació.</p>
<h2 id="autenticacio">Autenticació<a class="headerlink" href="#autenticacio" title="Permanent link">&para;</a></h2>
<p>Per a l'utenticació d'usuaris necessitem instal·lar unes quantes dependències ja preparades.</p>
<p>No cal crear un projecte nou però nosaltres ho farem per tenir-ne un amb autenticació i un altre no, el que ja vam fer al principi.</p>
<p>Primer de tot, crearem un nou projecte a Laravel que s'anomeni <code>notas_auth</code> i ens fiquem dins de la carpeta del mateix quan l'script hagi acabat.</p>
<p>Dins de la carpeta <code>notes_auth</code> llancem les següents ordres.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">composer require laravel/ui</span>
<span class="linenos" data-linenos="2 "></span><span class="go">php artisan ui vue --auth</span>
</code></pre></div>
<p>Per acabar, llançarem la comanda <code>migrate</code> que ja coneixem... <span class="alert"><strong>SI ESTÀS WINDOWS</strong></span> fora de la imatge de Docker (utilitzant xampp o semblants) has de crear una nova base de dades i posteriorment modificar el fitxer <code>.env</code> posant el nom dʻaquesta base de dades que acabes de crear.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan migrate</span>
</code></pre></div>
<p>Si tot ha sortit bé, podreu veure a la carpeta <code>resources/views</code> una carpeta que s'anomena <strong>auth</strong> i un controlador nou que anomena <code>HomeController</code></p>
<h3 id="restringir-una-ruta">Restringir una ruta<a class="headerlink" href="#restringir-una-ruta" title="Permanent link">&para;</a></h3>
<p>Si ens fixem, al nou controlador que s'ha creat <code>HomeController</code> podem veure unes línies al principi del fitxer que són les que determinen si la ruta està restringida a usuaris registrats i loguejats.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
<span class="linenos" data-linenos="3 "></span><span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>     <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
</code></pre></div>
<p>Mitjançant l'ús del <code>middleware</code> anomenat <code>auth</code> establim que totes les rutes que facin ús dʻaquest controlador hagin de passar pel login per mostrar el contingut.</p>
<p>Per tant, en els nostres projectes és recomanable fer servir diferents controladors per a diferents vistes; les que estiguin reestringides pel login i les que no.</p>
<h3 id="dades-de-lusuari">Dades de l'usuari<a class="headerlink" href="#dades-de-lusuari" title="Permanent link">&para;</a></h3>
<p>Sempre que vulguem accedir a qualsevol dada de l'usuari loguejat, farem servir el mètode <code>auth()</code> per treure per pantalla la informació o per utilitzar lògica a l'hora de desar dades a la base de dades en funció d'un usuari, un email o el camp que sigui.</p>
<p>Imaginem que tenim una ruta on accedim a aquesta informació</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">notes</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>   <span class="k">return</span> <span class="nx">auth</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span>   <span class="c1">// return auth()-&gt;user() -&gt; name;</span>
<span class="linenos" data-linenos="7 "></span>   <span class="c1">// return auth()-&gt;user() -&gt; email;</span>
<span class="linenos" data-linenos="8 "></span>   <span class="c1">// ...</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<p>Si visitem aquesta ruta amb el nostre login i password, ens apareixerà per pantalla tota la informació del nostre <code>user</code> a excepció de la contrasenya i, encara que així fos perquè li forcem, aquesta apareixerà encriptada.</p>
<h2 id="relacions-amb-eloquent">Relacions amb Eloquent<a class="headerlink" href="#relacions-amb-eloquent" title="Permanent link">&para;</a></h2>
<p>A través d'Eloquent podrem gestionar les relacions entre les nostres taules de la base de dades d'una manera molt senzilla i sense sentències SQL.</p>
<h3 id="un-a-un-1-a-1">Un a un (1 a 1)<a class="headerlink" href="#un-a-un-1-a-1" title="Permanent link">&para;</a></h3>
<p>Per crear aquest tipus de relacions a Eloquent i Laravel, hem de tenir creades les taules que relacionarem i establir la relació entre elles a través del mètode <code>hasOne</code>.</p>
<p>Suposem que tenim una taules <code>usuari</code> que està relacionada amb la taula <code>telefono</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">Usuari</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="sd">/**</span>
<span class="linenos" data-linenos="10 "></span><span class="sd">    * Obtenir el Telèfon associat amb l&#39;Usuari</span>
<span class="linenos" data-linenos="11 "></span><span class="sd">    */</span>
<span class="linenos" data-linenos="12 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">telèfon</span><span class="p">()</span>
<span class="linenos" data-linenos="13 "></span>   <span class="p">{</span>
<span class="linenos" data-linenos="14 "></span>       <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">hasOne</span><span class="p">(</span><span class="nx">Telefon</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="15 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="16 "></span><span class="p">}</span>
</code></pre></div>
<p>Un cop feta això, per poder recuperar la dada relacionada, hem d'utilitzar les propietats dinàmiques d'Eloquent. Amb aquestes propietats dinàmiques podrem obtenir aquesta dada.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$telefon</span> <span class="o">=</span> <span class="nx">Usuari</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">telefon</span><span class="p">;</span>
</code></pre></div>
<p>En aquest cas, Eloquent assumeix que a <code>Usuari</code> existeix la clau aliena <code>usuari_id</code> però què passa si tenim un altre nom? doncs s'ho passem com a paràmetre.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="nx">Telèfon</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;clau_aliena&#39;</span><span class="p">);</span>
</code></pre></div>
<h3 id="un-a-un-inversa">Un a Un <strong><em>INVERSA</em></strong><a class="headerlink" href="#un-a-un-inversa" title="Permanent link">&para;</a></h3>
<p>Ara que podem accedir al model telèfon des del model usuari, veurem com fer-ho de manera inversa, és a dir, com accedir des del model <code>usuari</code> des del model <code>telefono</code> gràcies al mètode <code>belongsTo()</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">Telefon</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">usuari</span><span class="p">()</span>
<span class="linenos" data-linenos="10 "></span>   <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>       <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsTo</span><span class="p">(</span><span class="nx">Usuari</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="12 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
</code></pre></div>
<p>En anomenar el mètode de <code>usuari</code>, Eloquent intentarà trobar un model dʻusuari que tingui un <code>id</code> que coincideixi amb la columna de <code>usuari_id</code> en el model de <code>telefon</code>.</p>
<p>Eloquent determina el nom de la clau externa examinant el nom del mètode de relació i afegint el sufix <code>_id</code> al nom del mètode. Aleshores, assumeix que el model <code>Telèfon</code> té una columna <code>usuari_id</code>. No obstant això, si no es diu així, podeu passar-li com a argument el nom de la clau.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">usuari</span><span class="p">()</span>
<span class="linenos" data-linenos="4 "></span><span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>     <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsTo</span><span class="p">(</span><span class="nx">Usuari</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;clau_aliena&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="un-a-molts-1-a-mm">Un a Molts (1 a MM)<a class="headerlink" href="#un-a-molts-1-a-mm" title="Permanent link">&para;</a></h3>
<p>En aquest cas, les relacions de 1 a molts podem dir que en una entrada d'un bloc, o en un post de Facebook, hi ha molts comentaris relacionats amb aquesta mateixa publicació.</p>
<p>Per començar, ja sabem que hem de crear el model i en aquest cas farem servir el mètode <code>hasMany()</code> per obtenir les dades relacionades amb aquest post o entrada al bloc</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">comentaris</span><span class="p">()</span>
<span class="linenos" data-linenos="11 "></span>   <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>       <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">hasMany</span><span class="p">(</span><span class="nx">Comentari</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
</code></pre></div>
<p>Compte amb les claus alienes, que aquí passa el mateix... Eloquent estableix per defecte el sufix <code>_id</code> per tant, en aquest exemple buscaria per <code>post_id</code>. Si no volem això o la nostra clau aliena té un altre nom, ho vam passar per paràmetre en el mètode <code>hasMany</code> com fèiem més amunt.</p>
<p>Ara, en haver-hi més d'una dada, necessitem iterar, per tant, hem de crear un bucle per poder treure cada dada.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">use</span> <span class="nx">App\Models\Post</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$comentaris</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">comentaris</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$comentaris</span> <span class="k">as</span> <span class="nv">$comentari</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="7 "></span>     <span class="c1">// El que sigui que fem amb aquestes dades</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<p>A més, com que totes les relacions són sentències SQL, podem niar diversos filtres en funció del que vulguem treure.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$comentari = Post::find(1) -&gt; comentaris()</span>
<span class="linenos" data-linenos="2 "></span><span class="x">     -&gt;where(&#39;títol&#39;, &#39;el que sigui&#39;)</span>
<span class="linenos" data-linenos="3 "></span><span class="x">     -&gt;first();</span>
</code></pre></div>
<h3 id="un-a-molts-inversa">Un a Molts <strong><em>INVERSA</em></strong><a class="headerlink" href="#un-a-molts-inversa" title="Permanent link">&para;</a></h3>
<p>Ara que podem accedir a tots els comentaris d'una publicació, definim una relació per permetre que un comentari accedeixi a la publicació principal.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">Comentari</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">post</span><span class="p">()</span>
<span class="linenos" data-linenos="11 "></span>   <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>       <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsTo</span><span class="p">(</span><span class="nx">Post</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
</code></pre></div>
<p>I ara, a través de la propietat de relació dinàmica...</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">use</span> <span class="nx">App\Models\Comentari</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$comentari</span> <span class="o">=</span> <span class="nx">Comentari</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="k">return</span> <span class="nv">$comentari</span> <span class="o">-&gt;</span> <span class="na">post</span> <span class="o">-&gt;</span> <span class="na">titulo</span><span class="p">;</span>
</code></pre></div>
<p>Passaria el mateix amb el nom de la clau aliena, si no es diu de la mateixa manera que Eloquent estableix amb el sufix <code>_id</code> podem passar-li com a paràmetre el nom de la clau on heu de buscar.</p>
<h3 id="molts-a-molts-mm-a-mm">Molts a Molts (MM a MM)<a class="headerlink" href="#molts-a-molts-mm-a-mm" title="Permanent link">&para;</a></h3>
<p>Aquest tipus de relacions són les més complicades ja que, en un Blog de l'estil Wordpress per exemple, un usuari pot tenir molts rols (lector, autor, administrador) però un rol poden tenir-lo diversos usuaris, és a dir, hi pot haver molts usuaris administradors, altres lectors i altres.</p>
<p>Per fer aquest tipus de relacions necessitaríem 3 taules diferents.</p>
<ul>
<li>usuaris [ id, nom]</li>
<li>rols [id, nom]</li>
<li>rol_usuari [usuari_id, rol_id] (Taula Pivote)</li>
</ul>
<p>Primer de tot, crearem les taules amb els seus models <span class="alert"><strong><em>a excepció de la taula pivot rol_usuari</em></strong></span> que <span class="warning"><strong><em>només crearem la taula, sense el seu model</em></strong></span></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan make:migration create_rol_usuari_table --create=rol_usuari</span>
</code></pre></div>
<p>I l'estructura de la dita seria de la següent manera...</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>     <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;rol_usuari&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>         <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">bigIncrements</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span>         <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedInteger</span><span class="p">(</span><span class="s1">&#39;usuari_id&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span>         <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">unsignedInteger</span><span class="p">(</span><span class="s1">&#39;rol_id&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span>         <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
<span class="linenos" data-linenos="10 "></span>     <span class="p">});</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span>
</code></pre></div>
<p>Ara que ja tenim tot llest, les relacions de Molts a Molts vénen definides per un mètode que torna el resultat d'usar el mètode <code>belongsToMany()</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">Usuari</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>     <span class="k">public</span> <span class="k">function</span> <span class="nf">roles</span><span class="p">()</span>
<span class="linenos" data-linenos="10 "></span>     <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>         <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Rol</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="12 "></span>     <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
</code></pre></div>
<p>Un cop tinguem les relacions definides, hi accedirem mitjançant les propietats dinàmiques de <code>rol</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">useu</span> <span class="nx">App\Models\Usuari</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$usuari</span> <span class="o">=</span> <span class="nx">Usuari</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$usuari</span> <span class="o">-&gt;</span> <span class="na">rols</span> <span class="k">as</span> <span class="nv">$rol</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="8 "></span>     <span class="c1">// el nostre codi</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<p>Recordeu-vos que podem encadenar comandes sql a través dels mètodes d'Eloquent</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$roles</span> <span class="o">=</span> <span class="nx">Usuari</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">rols</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="na">orderBy</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="na">get</span><span class="p">();</span>
</code></pre></div>
<h3 id="molts-a-molts-inversa">Molts a Molts <strong><em>INVERSA</em></strong><a class="headerlink" href="#molts-a-molts-inversa" title="Permanent link">&para;</a></h3>
<p>Per definir el "invers" d'una relació de molts a molts, cal establir un mètode en el model relacionat que també retorni el resultat del mètode <code>belongsToMany</code>. Segons l'exemple que estem seguint...</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Database\Eloquent\Model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">Rol</span> <span class="k">extends</span> <span class="nx">Model</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">usuaris</span><span class="p">()</span>
<span class="linenos" data-linenos="10 "></span>   <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>       <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Usuari</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="12 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
</code></pre></div>
Farem un exemple amb una APP que gestions alumnes i assignatures, de manera que MOLTS ALUMNES poden cursar MOLTES ASSIGNATURES</p>
<p>Què necessitem per a aquest exemple?</p>
<ul>
<li>
<p>3 migracions per crear les taules</p>
<ul>
<li><code>Alumnes</code> /// <code>Materies</code> /// <code>AlumneMateria</code></li>
</ul>
</li>
<li>
<p>Modificar els fitxers de les migracions <code>create_alumnes_table</code> i <code>create_materies_table</code>.</p>
</li>
<li>Crear la base de dades <code>molts_a_molts</code></li>
<li>Executar les Migracions</li>
<li>2 <strong>models</strong> per a <code>Alumnes</code> /// <code>Materies</code></li>
<li>Mètode dins de <code>Alumne</code> per crear la relació Alumne -&gt; Matèria</li>
<li>Crear el controlador per a la vista</li>
<li>Crear la ruta de la nostra vista</li>
<li>Emplenar la base de dades</li>
<li>Crear la vista amb les dades</li>
</ul>
<p><span class="success"><strong>3 MIGRACIONS</strong></span>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan make:migration create_alumnes_table</span>
<span class="linenos" data-linenos="2 "></span><span class="go">php artisan make:migration create_materies_table</span>
<span class="linenos" data-linenos="3 "></span><span class="go">php artisan make:migration create_alumne_materia_table</span>
</code></pre></div></p>
<p><span class="success"><strong>MODIFICANT LES MIGRACIONS</strong></span></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">create_alumnes_table.php</label><label for="__tabbed_1_2">create_materies_table.php</label><label for="__tabbed_1_3">create_alumne_materia_table.php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>  <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;alumnes&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
<span class="linenos" data-linenos=" 9 "></span>  <span class="p">});</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>  <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;materies&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;nom&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
<span class="linenos" data-linenos=" 9 "></span>  <span class="p">});</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>  <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;alumne_materia&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">();</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;alumne_id&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos=" 9 "></span>      <span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span>
<span class="linenos" data-linenos="10 "></span>      <span class="o">-&gt;</span><span class="na">constrained</span><span class="p">(</span><span class="s1">&#39;alumnes&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="11 "></span>      <span class="o">-&gt;</span><span class="na">cascadeOnUpdate</span><span class="p">()</span>
<span class="linenos" data-linenos="12 "></span>      <span class="o">-&gt;</span><span class="na">nullOnDelete</span><span class="p">();</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">foreignId</span><span class="p">(</span><span class="s1">&#39;materia_id&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span>      <span class="o">-&gt;</span><span class="na">nullable</span><span class="p">()</span>
<span class="linenos" data-linenos="16 "></span>      <span class="o">-&gt;</span><span class="na">constrained</span><span class="p">(</span><span class="s1">&#39;materies&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="17 "></span>      <span class="o">-&gt;</span><span class="na">cascadeOnUpdate</span><span class="p">()</span>
<span class="linenos" data-linenos="18 "></span>      <span class="o">-&gt;</span><span class="na">nullOnDelete</span><span class="p">();</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span>    <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span>
<span class="linenos" data-linenos="21 "></span>  <span class="p">});</span>
<span class="linenos" data-linenos="22 "></span><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>CREEM LA BASE DE DADES</strong></span></p>
<p>Per a aquest exemple, crearem una base de dades que s'anomeni <code>molts_a_molts</code> des de la consola de MySQL o MariaDB.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">CREATE TABLE `molts_a_molts`</span>
</code></pre></div>
<p><span class="success"><strong>EXECUTANT LES MIGRACIONS</strong></span></p>
<p>Ja tenim les migracions creades i la base de dades llesta per inserir el contingut de les migracions que hem escrit més amunt, el que ens queda és “executar les migracions” per bolcar tota l'estructura a la nostra nova base de dades.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan migrate</span>
</code></pre></div>
<p><span class="success"><strong>2 MODELS PER ALUMNES I MATÈRIES</strong></span></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan make:model Alumne</span>
<span class="linenos" data-linenos="2 "></span><span class="go">php artisan make:model Materia</span>
</code></pre></div>
<p><span class="success"><strong>MÈTODES PER CREAR LES RELACIONS ALUMNE &lt;-&gt; MATÈRIA</strong></span></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Alumne.php</label><label for="__tabbed_2_2">Materia.php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">materies</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>  <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Materia</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;alumne_materia&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">alumnes</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>  <span class="k">return</span> <span class="nv">$this</span> <span class="o">-&gt;</span> <span class="na">belongsToMany</span><span class="p">(</span><span class="nx">Alumne</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;alumne_materia&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>CREANT EL CONTROLADOR DE LA VISTA</strong></span></p>
<p>Necessitem un controlador per redireccionar les rutes a les vistes que nosaltres vulguem, per això crearem el controlador <code>RelacionController</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="go">php artisan make:controller RelacionController</span>
</code></pre></div>
<p><span class="success"><strong>CREANT RUTES</strong></span></p>
<p>Ara que ja tenim el nostre controlador, crearem una única vista per mostrar l'exemple de la relació MOLTS a MOLTS, en aquest cas un alumne determinat.</p>
<p>A més, al nostre controlador <code>RelacioController</code> escriurem el codi necessari perquè ens torni les dades relacionades amb l'alumne amb id <code>1</code> i la matèria amb id <code>2</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">web.php</label><label for="__tabbed_3_2">RelacioController.php</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span>  <span class="k">use</span> <span class="nx">App\Http\Controllers\RelacioController</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>  <span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Route</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span>  <span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;molts&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">RelacioController</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span> <span class="p">]);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span>  <span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>  <span class="k">use</span> <span class="nx">App\Models\Alumne</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>  <span class="k">use</span> <span class="nx">App\Models\Materia</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>  <span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>  <span class="k">class</span> <span class="nc">RelacioController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="linenos" data-linenos="10 "></span>  <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>      <span class="nv">$alumne</span> <span class="o">=</span> <span class="nx">Alumne</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span>      <span class="nv">$materia</span> <span class="o">=</span> <span class="nx">Matèria</span><span class="o">::</span><span class="na">find</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>      <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;molts&#39;</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;alumne&#39;</span><span class="p">,</span> <span class="s1">&#39;matèria&#39;</span><span class="p">));</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="17 "></span>  <span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>EMPLENANT LA BASE DE DADES</strong></span></p>
<p>Necessitem ficar alguns registres a la nostra base de dades, per tant, crearem diverses dades al nostre sistema amb les següents sentències SQL.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Taula Alumnes</label><label for="__tabbed_4_2">Taula Matèries</label><label for="__tabbed_4_3">Taula Alumne_Materia</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">alumnes</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">nom</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="n">VALUS</span>
<span class="linenos" data-linenos="2 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Antonio&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="3 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Laura&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="4 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Marta&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="5 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Pedro&#39;</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">matèries</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">nom</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="n">VALUS</span>
<span class="linenos" data-linenos="2 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Programació&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="3 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Interfaces&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="4 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;JavaScript&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="5 "></span><span class="w">  </span><span class="p">(</span><span class="s1">&#39;Sistemes&#39;</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="w">  </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">alumne_matèria</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">alumne_id</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="o">`</span><span class="n">matèria_id</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span>
<span class="linenos" data-linenos="2 "></span><span class="w">  </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="linenos" data-linenos="3 "></span><span class="w">  </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span>
<span class="linenos" data-linenos="4 "></span><span class="w">  </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="linenos" data-linenos="5 "></span><span class="w">  </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span>
<span class="linenos" data-linenos="6 "></span><span class="w">  </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span>
<span class="linenos" data-linenos="7 "></span><span class="w">  </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span>
<span class="linenos" data-linenos="8 "></span><span class="w">  </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span>
<span class="linenos" data-linenos="9 "></span><span class="w">  </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p><span class="success"><strong>CREANT LA VISTA AMB LES DADES</strong></span></p>
<p>L'últim pas que farem és, llistar les dades relacionades en una vista o plantilla <code>Blade</code> senzilla. Per això ens creem l'arxiu <code>muchos.blade.php</code> ja que és el nom que hem posat al nostre arxiu de rutes.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Alumnes que cursen matèries</label><label for="__tabbed_5_2">Materies cursades per alumnes</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row justify-content-center&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-auto&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Alumne {{ $alumne -&gt; nom }} està cursant les matèries<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>      <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary text-white&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>MATÈRIES<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>      <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>      <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="11 "></span>        @foreach ($alumne -&gt; matèries as $registre)
<span class="linenos" data-linenos="12 "></span>          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="13 "></span>            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span>                {{ $registre -&gt; nom }}
<span class="linenos" data-linenos="15 "></span>             <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span>          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="17 "></span>        @endforeach
<span class="linenos" data-linenos="18 "></span>      <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="19 "></span>    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="20 "></span>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row justify-content-center&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-auto&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>La matèria {{$materia -&gt; nom }} l&#39;estan cursant els alumnes<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table table-striped table-hover&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>      <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bg-primary text-white&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>ALUMNES<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>      <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>      <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="11 "></span>        @foreach ($materia -&gt; alumnes as$registre)
<span class="linenos" data-linenos="12 "></span>          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="13 "></span>            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span>              {{ $registre -&gt; nom }}
<span class="linenos" data-linenos="15 "></span>            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span>          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="17 "></span>        @endforeach
<span class="linenos" data-linenos="18 "></span>      <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="19 "></span>    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="20 "></span>  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
</div>
</div>
<hr />












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2024 Xavier Sastre - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "toc.integrate", "content.tabs.link", "navigation.expand"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}}</script>
    
    
      <script src="assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>