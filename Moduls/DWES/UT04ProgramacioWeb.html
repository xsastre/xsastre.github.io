<!DOCTYPE html><html lang="ca" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docencia.xaviersastre.cat/Moduls/DWES/UT04ProgramacioWeb.html">
      
      
      
      
      <link rel="icon" href="../../imatges/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Programació Web - Docencia Xavier</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../../css/custom_admonitions.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-KXJX1CP7QG"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-KXJX1CP7QG",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-KXJX1CP7QG",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#programacio-web" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../../index.html" title="Docencia Xavier" class="md-header__button md-logo" aria-label="Docencia Xavier" data-md-component="logo">
      
  <img src="../../imatges/education_blanc.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docencia Xavier
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Programació Web
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="Teal" aria-label="Canviar a mode nit" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode nit" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="Teal" aria-label="Canviar a mode dia" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode dia" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Docencia Xavier" class="md-nav__button md-logo" aria-label="Docencia Xavier" data-md-component="logo">
      
  <img src="../../imatges/education_blanc.png" alt="logo">

    </a>
    Docencia Xavier
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inici
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Normativa Ciberseguretat
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Normativa Ciberseguretat
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducció i index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT01 Compliment normatiu
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            UT01 Compliment normatiu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/UT01.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/presentacions/01%20Unitat%201%20-%20Compliment%20%20normatiu_ok/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diapositives unitat
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3">
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT02 Disseny de sistemes de gestió de compliment normatiu
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            UT02 Disseny de sistemes de gestió de compliment normatiu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/UT02.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/presentacions/03%20Unitat%202%20-%20Disseny%20de%20sistemes%20de%20compliment%20normatiu_ok/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diapositives unitat
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    DWES
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            DWES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1">
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT01 Arquitectures Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            UT01 Arquitectures Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT01ArquitecturesWeb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="presentacions/DWESUT01 - Arquitectures i eines/index_HTML.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diapositives unitat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT01ArquitecturesWebVideo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vídeo resum de la unitat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="mm/DWESUT01.mm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mapa conceptual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="flashcards/flashcards-DWES-UT01.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flashcards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT01ArquitecturesWebActivitats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Activitats
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2">
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT02 Llenguatge PHP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UT02 Llenguatge PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT02PHP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT02PHPVideo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vídeo resum de la unitat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT02PHPTest.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test autoavaluació
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="exercicisisolucions/UT02PHPExercicis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Activitats
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3">
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT03 Llenguatge PHP Orientat a Objectes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            UT03 Llenguatge PHP Orientat a Objectes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UT03PHPPOO.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="exercicisisolucions/UT03PHPPOOExercicis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Activitats
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    DWEC
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            DWEC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1">
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT01 Arquitectures Web
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            UT01 Arquitectures Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/UT01.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/presentacions/DWECUT01/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diapositives unitat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/mm/DWECUT01.mm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mapa conceptual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/flashcards/flashcards-UT01.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flashcards
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2">
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT02 Llenguatge Javascript
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            UT02 Llenguatge Javascript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/UT02.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/presentacions/DWECUT02/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diapositives unitat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/mm/DWECUT02.mm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mapa conceptual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/flashcards/flashcards-UT02.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flashcards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/exercicisisolucions/UT02Exercicis.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exercicis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3">
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UT03 Model d’objectes predefinits a JavaScript.
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            UT03 Model d’objectes predefinits a JavaScript.
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/UT03.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Material teòric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/presentacions/DWECUT03/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diapositives unitat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/mm/DWECUT02.mm.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mapa conceptual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWEC/flashcards/flashcards-UT03.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flashcards
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Projecte Intermodular
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Projecte Intermodular
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PI/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducció i índex
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6">
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bloc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2">
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Arxiva
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Arxiva
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2025.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2024.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3">
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/aws.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/amazon.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/coneixements-generals.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coneixements generals
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dam.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DAM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/daw.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DAW
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dwec.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DWEC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dwes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DWES
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dynamodb.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DynamoDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/general.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/html.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/js.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/java.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/javascript.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Javascript
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/matem%C3%A0tiques.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Matemàtiques
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/php.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PHP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/psp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PSP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/programaci%C3%B3.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programació
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/programci%C3%B3-multifil.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programció multifil
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/projecte-intermodular.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projecte intermodular
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/springboot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SpringBoot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="programacio-web">Programació Web<a class="headerlink" href="#programacio-web" title="Permanent link">¶</a></h1>
<details class="abstract">
<summary>Durada i criteris d'avaluació</summary>
<p>Durada estimada: 12 sessions</p>
<p><h></h></p>
<table>
<thead>
<tr>
<th>Resultat daprenentatge</th>
<th>Criteris d'avaluació</th>
</tr>
</thead>
<tbody>
<tr>
<td>4. Desenvolupa aplicacions Web encastades en llenguatges de marques analitzant i incorporant funcionalitats segons especificacions.</td>
<td>a) S'han identificat els mecanismes disponibles per al manteniment de la informació que concerneix un client web concret i se n'han assenyalat els avantatges.<br> b) S'han utilitzat sessions per mantenir l'estat de les aplicacions Web. <br> c) S'han utilitzat *cookies* per emmagatzemar informació al client web i per recuperar-ne el contingut. <br> d) S'han identificat i caracteritzat els mecanismes disponibles per a l'autenticació d'usuaris. <br> e) S'han escrit aplicacions que integrin mecanismes d'autenticació d'usuaris. <br> f) S'han realitzat adaptacions a aplicacions Web existents com a gestors de continguts o altres. <br> g) S'han utilitzat eines i entorns per facilitar la programació, prova i depuració del codi.</td>
</tr>
</tbody>
</table>
</details>
<h2 id="variables-de-servidor">Variables de servidor<a class="headerlink" href="#variables-de-servidor" title="Permanent link">¶</a></h2>
<p>PHP emmagatzema la informació del servidor i de les peticions HTTP a sis vectors globals:</p>
<ul>
<li><code>$_ENV</code>: informació sobre les variables d'entorn</li>
<li><code>$_GET</code>: paràmetres enviats a la petició GET</li>
<li><code>$_POST</code>: paràmetres enviats a l'enviament POST</li>
<li><code>$_COOKIE</code>: conté les cookies de la petició, les claus de l'array són els noms de les <em>galetes</em></li>
<li><code>$_SERVER</code>: informació sobre el servidor</li>
<li><code>$_FILES</code>: informació sobre els fitxers carregats via upload</li>
</ul>
<p>Si ens centrem a l'array <code>$_SERVER</code> podem consultar les propietats següents:</p>
<ul>
<li><code>PHP_SELF</code>: nom de l'script executat, relatiu al document root (p.ex: <code>/tienda/carrito.php</code>)</li>
<li><code>SERVER_SOFTWARE</code>: (p. ex.: Apache)</li>
<li><code>SERVER_NAME</code>: domini, àlies DNS (per exemple:<code>www.elche.es</code>)</li>
<li><code>REQUEST_METHOD·LICITUD</code>: GET</li>
<li><code>REQUEST_URI</code>: URI, sense el domini</li>
<li><code>QUERY_STRING</code>: tot el que va després de <code>?</code>a l'URL (per exemple:<code>heroe=Batman&amp;nom=Bruce</code>)</li>
</ul>
<p>Més informació a <a href="https://www.php.net/manual/es/reserved.variables.server.php">https://www.php.net/manual/es/reserved.variables.server.php</a></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"PHP_SELF"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">///u4/401server.php</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"SERVER_SOFTWARE"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// Apache/2.4.46 (Win64) OpenSSL/1.1.1g PHP/7.4.9</span>
<span class="linenos" data-linenos="5 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"REQUEST_METHOD"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// GET</span>
<span class="linenos" data-linenos="6 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"REQUEST_URI"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// /u4/401server.php?heroe=Batman</span>
<span class="linenos" data-linenos="7 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"QUERY_STRING"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// heroe=Batman</span>
</code></pre></div>
<p>Altres propietats relacionades:</p>
<ul>
<li><code>PATH_INFO</code>: ruta extra després de la petició. Si la URL és <code>http://www.php.com/php/pathInfo.php/algo/cosa?foo=bar</code>, llavors <code>$_SERVER['PATH_INFO']</code> serà <code>/alguna_cosa/cosa</code>.</li>
<li><code>REMOTE_HOST</code>: hostname que va fer la petició</li>
<li><code>REMOTE_ADDR</code>: IP del client</li>
<li><code>AUTH_TYPE</code>: tipus d'autenticació (p.ex: Basic)</li>
<li><code>REMOTE_USER</code>: nom de l'usuari autenticat</li>
</ul>
<p>Apache crea una clau per a cada capçalera HTTP, en majúscules i substituint els guions per subratllats:</p>
<ul>
<li><code>HTTP_USER_AGENT</code>agent (navegador)</li>
<li><code>HTTP_REFERER</code>: pàgina des de la qual es va fer la petició</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">PHP</label><label for="__tabbed_1_2">Resultat</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"HTTP_USER_AGENT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> 
</code></pre></div>
</div>
<div class="tabbed-block">
<p>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Safari/605.1.15</p>
</div>
</div>
</div>
<h2 id="formularis">Formularis<a class="headerlink" href="#formularis" title="Permanent link">¶</a></h2>
<p>A l'hora d'enviar un formulari, hem de tenir clar quan fer servir GET o POST</p>
<ul>
<li>GET: els paràmetres es passen a la URL</li>
<li>&lt;2048 caràcters, només ASCII</li>
<li>Permet emmagatzemar l'adreça completa (marcador/historial)</li>
<li>Idempotent: dues trucades amb les mateixes dades sempre han de donar el mateix resultat</li>
<li>
<p>El navegador pot escorcollar les trucades</p>
</li>
<li>
<p>POST: paràmetres ocults (no encriptats)</p>
</li>
<li>
<p>Sense límit de dades, permet dades binàries.</p>
</li>
<li>No es poden escorcollar</li>
<li>No idempotent → actualitzar la BBDD</li>
</ul>
<p>Així doncs, per recollir les dades accedirem a l'array depenent del mètode del formulari que ens ha invocat:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$par</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">]</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$par</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">]</span>
</code></pre></div>
<p>Per als següents apartats ens basarem en el següent exemple:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">&lt;form action="formulario.php" method="GET"&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">    &lt;p&gt;&lt;label for="nombre"&gt;Nombre del alumno:&lt;/label&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">        &lt;input type="text" name="nombre" id="nombre" value="" /&gt;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">    &lt;/p&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    &lt;p&gt;&lt;input type="checkbox" name="modulos[]" id="modulosDWES" value="DWES" /&gt;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">        &lt;label for="modulosDWES"&gt;Desarrollo web en entorno servidor&lt;/label&gt;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">    &lt;/p&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="x">    &lt;p&gt;&lt;input type="checkbox" name="modulos[]" id="modulosDWEC" value="DWEC" /&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        &lt;label for="modulosDWEC"&gt;Desarrollo web en entorno cliente&lt;/label&gt;</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    &lt;/p&gt;</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="x">    &lt;input type="submit" value="Enviar" name="enviar" /&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="x">&lt;/form&gt;</span>
</code></pre></div>
<h3 id="validacio">Validació<a class="headerlink" href="#validacio" title="Permanent link">¶</a></h3>
<p>Pel que fa a la validació, és convenient sempre fer <strong>validació doble</strong>:</p>
<ul>
<li>Al client mitjançant JS</li>
<li>A servidor, abans de trucar a negoci, és convenient tornar a validar les dades.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="nv">$par</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">];</span>
<span class="linenos" data-linenos="4 "></span>    <span class="c1">// comprobar si $par tiene el formato adecuado, su valor, etc...</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Llibreries de validació</p>
<p>Hi ha diverses llibreries que faciliten la validació dels formularis, com són <a href="https://respect-validation.readthedocs.io/en/latest/">respect/validation</a> o <a href="http://validator.particle-php.com/en/latest/">particle/validador</a>. En Laravel es treballa en la validació de manera declarativa.</p>
</div>
<h3 id="parametre-multivalor">Paràmetre multivalor<a class="headerlink" href="#parametre-multivalor" title="Permanent link">¶</a></h3>
<p>Hi ha elements HTML que envien diversos valors:</p>
<ul>
<li><code>select multiple</code> o <code>de selecció múltiple</code></li>
<li><code>checkbox</code> o <code>caselles de selecció</code></li>
</ul>
<p>Per recollir les dades, el nom de l'element ha de ser un matriu.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">&lt;select name="lenguajes[]" multiple="true"&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">    &lt;option value="c"&gt;C&lt;/option&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">    &lt;option value="java"&gt;Java&lt;/option&gt;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">    &lt;option value="php"&gt;PHP&lt;/option&gt;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    &lt;option value="python"&gt;Python&lt;/option&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">&lt;/select&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">&lt;input type="checkbox" name="lenguajes[]" value="c" /&gt; C&lt;br/&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">&lt;input type="checkbox" name="lenguajes[]" value="java" /&gt; Java&lt;br/&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="x">&lt;input type="checkbox" name="lenguajes[]" value="php" /&gt; Php&lt;br/&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">&lt;input type="checkbox" name="lenguajes[]" value="python" /&gt; Python&lt;br/&gt;</span>
</code></pre></div>
<p>De manera que després en recollir les dades:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$lenguajes</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"lenguajes"</span><span class="p">];</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$lenguajes</span> <span class="k">as</span> <span class="nv">$lenguaje</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>    <span class="k">echo</span> <span class="s2">"</span><span class="si">$lenguaje</span><span class="s2"> &lt;br/&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="tornant-a-emplenar-un-formulari">Tornant a emplenar un formulari<a class="headerlink" href="#tornant-a-emplenar-un-formulari" title="Permanent link">¶</a></h3>
<p>Un <em>sticky form</em> és un formulari que recorda els valors. Per això, hem d'emplenar els atributs <code>value</code> dels elements HTML amb la informació que contenien:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'modulos'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nombre'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>  <span class="c1">// Aquí se incluye el código a ejecutar cuando los datos son correctos</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>  <span class="c1">// Generamos el formulario</span>
<span class="linenos" data-linenos=" 6 "></span>  <span class="nv">$nombre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nombre'</span><span class="p">]</span> <span class="o">??</span> <span class="s2">""</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>  <span class="nv">$modulos</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'modulos'</span><span class="p">]</span> <span class="o">??</span> <span class="p">[];</span>
<span class="linenos" data-linenos=" 8 "></span>  <span class="cp">?&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">  &lt;form action="</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'PHP_SELF'</span><span class="p">];</span><span class="cp">?&gt;</span><span class="x">" method="POST"&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="x">   &lt;p&gt;&lt;label for="nombre"&gt;Nombre del alumno:&lt;/label&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">    &lt;input type="text" name="nombre" id="nombre" value="</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$nombre</span> <span class="cp">?&gt;</span><span class="x">" /&gt; </span>
<span class="linenos" data-linenos="12 "></span><span class="x">   &lt;/p&gt;</span>
<span class="linenos" data-linenos="13 "></span><span class="x">   &lt;p&gt;&lt;input type="checkbox" name="modulos[]" id="modulosDWES" value="DWES"</span>
<span class="linenos" data-linenos="14 "></span><span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">if</span><span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="s2">"DWES"</span><span class="p">,</span><span class="nv">$modulos</span><span class="p">))</span> <span class="k">echo</span> <span class="s1">'checked="checked"'</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"> /&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="x">    &lt;label for="modulosDWES"&gt;Desarrollo web en entorno servidor&lt;/label&gt;</span>
<span class="linenos" data-linenos="16 "></span><span class="x">   &lt;/p&gt;</span>
<span class="linenos" data-linenos="17 "></span><span class="x">   &lt;p&gt;&lt;input type="checkbox" name="modulos[]" id="modulosDWEC" value="DWEC"</span>
<span class="linenos" data-linenos="18 "></span><span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">if</span><span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="s2">"DWEC"</span><span class="p">,</span><span class="nv">$modulos</span><span class="p">))</span> <span class="k">echo</span> <span class="s1">'checked="checked"'</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"> /&gt;</span>
<span class="linenos" data-linenos="19 "></span><span class="x">    &lt;label for="modulosDWEC"&gt;Desarrollo web en entorno cliente&lt;/label&gt;</span>
<span class="linenos" data-linenos="20 "></span><span class="x">   &lt;/p&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="x">   &lt;input type="submit" value="Enviar" name="enviar"/&gt;</span>
<span class="linenos" data-linenos="22 "></span><span class="x">  &lt;/form&gt;</span>
<span class="linenos" data-linenos="23 "></span><span class="cp">&lt;?php</span> <span class="p">}</span> <span class="cp">?&gt;</span>
</code></pre></div>
<h3 id="pujant-fitxers">Pujant fitxers<a class="headerlink" href="#pujant-fitxers" title="Permanent link">¶</a></h3>
<p>S'emmagatzemen al servidor a l'array <code>$_FILES</code> amb el nom del camp del tipus <code>file</code> del formulari.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">&lt;form enctype="multipart/form-data" action="</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'PHP_SELF'</span><span class="p">];</span> <span class="cp">?&gt;</span><span class="x">"  method="POST"&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="x">    Archivo: &lt;input name="archivoEnviado" type="file" /&gt;</span>
<span class="linenos" data-linenos="3 "></span><span class="x">    &lt;br/&gt;</span>
<span class="linenos" data-linenos="4 "></span><span class="x">    &lt;input type="submit" name="btnSubir" value="Subir" /&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="x">&lt;/form&gt;</span>
</code></pre></div>
<p>Configuració a <code>php.ini</code></p>
<ul>
<li><code>file_uploads</code>: encès / apagat</li>
<li><code>upload_max_filesize</code>: 2M</li>
<li><code>upload_tmp_dir</code>: directori temporal. No cal configurar-lo, agafarà el predeterminat del sistema</li>
<li><code>post_max_size</code>: mida màxima de les dades POST. Ha de ser més gran a upload_max_filesize.</li>
<li><code>max_file_uploads</code>: nombre màxim de fitxers que es poden carregar alhora.</li>
<li><code>max_input_time</code>: temps màxim emprat a la càrrega (GET/POST i upload → normalment es configura a 60)</li>
<li><code>memory_limit</code>: 128M</li>
<li><code>max_execution_time</code>: temps d'execució d'un script (no té en compte l'upload)</li>
</ul>
<p>Per carregar els fitxers, accedim a l'array <code>$_FILES</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'btnSubir'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'btnSubir'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Subir'</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">if</span> <span class="p">(</span><span class="nb">is_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>        <span class="c1">// subido con éxito</span>
<span class="linenos" data-linenos=" 5 "></span>        <span class="nv">$nombre</span> <span class="o">=</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">];</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span> <span class="s2">"./uploads/</span><span class="si">{</span><span class="nv">$nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="k">echo</span> <span class="s2">"&lt;p&gt;Archivo </span><span class="si">$nombre</span><span class="s2"> subido con éxito&lt;/p&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
<p>Cada fitxer carregat a <code>$_FILES</code> té:</p>
<ul>
<li><code>name</code>: nom</li>
<li><code>tmp_name</code>: ruta temporal</li>
<li><code>size</code>: mida en bytes</li>
<li><code>type</code>: tipus MIME</li>
<li><code>error</code>: si hi ha error, conté un missatge. Si ok → 0.</li>
</ul>
<h2 id="capcaleres-de-resposta">Capçaleres de resposta<a class="headerlink" href="#capcaleres-de-resposta" title="Permanent link">¶</a></h2>
<p>Ha de ser el primer a tornar. Es retornen mitjançant la funció <code>header(cadena)</code>. Mitjançant les capçaleres podem configurar el tipus de contingut, el temps d'expiració, redireccionar el navegador, especificar errors HTTP, etc.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span> <span class="nb">header</span><span class="p">(</span><span class="s2">"Content-Type: text/plain"</span><span class="p">);</span> <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="cp">&lt;?php</span> <span class="nb">header</span><span class="p">(</span><span class="s2">"Location: https://docencia.xaviersastre.cat/index.html"</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="k">exit</span><span class="p">();</span>
</code></pre></div>
<p>Es pot comprovar a les eines del desenvolupador dels navegadors web mitjançant <em>Eines de desenvolupador → Xarxa → Capçaleres</em>.</p>
<p>És molt comú configurar les capçaleres per evitar consultes a la memòria cau o provocar-ne la renovació:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: Sun, 31 Jan 2021 23:59:59 GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// tres hores</span>
<span class="linenos" data-linenos=" 4 "></span><span class="nv">$now</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="linenos" data-linenos=" 5 "></span><span class="nv">$horas3</span> <span class="o">=</span> <span class="nb">gmdate</span><span class="p">(</span><span class="s2">"D, d M Y H:i:s"</span><span class="p">,</span> <span class="nv">$now</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">.</span> <span class="s2">" GMT"</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: </span><span class="si">{</span><span class="nv">$horas3</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">// un any</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$now</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$anyo1</span> <span class="o">=</span> <span class="nb">gmdate</span><span class="p">(</span><span class="s2">"D, d M Y H:i:s"</span><span class="p">,</span> <span class="nv">$now</span> <span class="o">+</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">86400</span><span class="p">)</span> <span class="o">.</span> <span class="s2">" GMT"</span><span class="p">;</span> <span class="c1">// corregit també l'error: 86440 → 86400</span>
<span class="linenos" data-linenos="10 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: </span><span class="si">{</span><span class="nv">$anyo1</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">// se marca com expirat (data en el passat)</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$pasado</span> <span class="o">=</span> <span class="nb">gmdate</span><span class="p">(</span><span class="s2">"D, d M Y H:i:s"</span><span class="p">)</span> <span class="o">.</span> <span class="s2">" GMT"</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: </span><span class="si">{</span><span class="nv">$pasado</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">// evitem caché de navegador i/o proxy</span>
<span class="linenos" data-linenos="15 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: Mon, 26 Jul 1997 05:00:00 GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos="16 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Last-Modified: "</span> <span class="o">.</span> <span class="nb">gmdate</span><span class="p">(</span><span class="s2">"D, d M Y H:i:s"</span><span class="p">)</span> <span class="o">.</span> <span class="s2">" GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos="17 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Cache-Control: no-store, no-cache, must-revalidate"</span><span class="p">);</span>
<span class="linenos" data-linenos="18 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Cache-Control: post-check=0, pre-check=0"</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="linenos" data-linenos="19 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Pragma: no-cache"</span><span class="p">);</span>
</code></pre></div>
<h2 id="gestio-de-lestat">Gestió de l'estat<a class="headerlink" href="#gestio-de-lestat" title="Permanent link">¶</a></h2>
<p>HTTP és un protocol <em>stateless</em>, sense estat. Per això, se simula l'estat mitjançant l'ús de galetes, tokens o la sessió. L'estat és necessari per a processos com ara el carret de la compra, operacions associades a un usuari, etc... El mecanisme de PHP per gestionar la sessió utilitza cookies de forma interna. Les galetes s'emmagatzemen al navegador, i la sessió al servidor web.</p>
<h3 id="galetes">Galetes<a class="headerlink" href="#galetes" title="Permanent link">¶</a></h3>
<p>Les galetes s'emmagatzemen a l'array global <code>$_COOKIE</code>. El que col·loquem dins de l'array, es guardarà al client. Cal tenir present que el client pot no voler emmagatzemar-les.</p>
<p>Hi ha una limitació de 20 cookies per domini i 300 en total al navegador.</p>
<p>A PHP, per crear una galeta s'utilitza la funció <code>setcookie</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span> <span class="p">[,</span> <span class="nx">valor</span> <span class="p">[,</span> <span class="nx">expira</span> <span class="p">[,</span> <span class="nx">ruta</span> <span class="p">[,</span> <span class="nx">dominio</span> <span class="p">[,</span> <span class="nx">seguro</span> <span class="p">[,</span> <span class="nx">httponly</span> <span class="p">]]]]]]);</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span> <span class="p">[,</span> <span class="nx">valor</span> <span class="o">=</span> <span class="s2">""</span> <span class="p">[,</span> <span class="nx">opciones</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">]]</span> <span class="p">)</span>
<span class="linenos" data-linenos="4 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<p>Cal destacar que el nom no pot contenir espais ni el caràcter <code>;</code>. Pel que fa al contingut de la galeta, no pot superar els 4 KB.</p>
<p>Per exemple, mitjançant <em>cookies</em> podem comprovar la quantitat de visites diferents que realitza un usuari:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nv">$accesosPagina</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Comença en 1 pel primer accès</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">'accesos'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="nv">$accesosPagina</span> <span class="o">=</span> <span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">'accesos'</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Suma un a l'últim valor</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">// Opcional: cookie per a 30 dies</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="s1">'accesos'</span><span class="p">,</span> <span class="nv">$accesosPagina</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="mi">86400</span> <span class="o">*</span> <span class="mi">30</span><span class="p">),</span> <span class="s2">"/"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1">// Mostrar valor actual</span>
<span class="linenos" data-linenos="11 "></span><span class="k">echo</span> <span class="s2">"Has visitat aquesta pàgina </span><span class="si">$accesosPagina</span><span class="s2"> cops."</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Inspeccionant les cookies</p>
<p>Si volem veure que contenen les cookies que tenim emmagatzemades al navegador, es pot comprovar el seu valor a <em>Eines de desenvolupament → Aplicació → Emmagatzematge</em></p>
</div>
<p>El temps de vida de les galetes pot ser tan llarg com el lloc web on resideixen. Elles seguiran allà, fins i tot si el navegador està tancat o obert.</p>
<p>Per esborrar una galeta es pot posar que expirin en el passat:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// pasado</span>
</code></pre></div>
<p>O que caduquin dins un període de temps determinat:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span> <span class="nx">valor</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">3600</span><span class="p">)</span> <span class="c1">// Caducan dentro de una hora</span>
</code></pre></div>
<figure style="align: center;">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="img/04cookies.png"><img src="img/04cookies.png" width="700"></a>
<figcaption>Comunicació amb cookies</figcaption>
</figure>
<p>S'utilitzen per a:</p>
<ul>
<li>Recordar els inicis de sessió</li>
<li>Emmagatzemar valors temporals d'usuari</li>
<li>Si un usuari està navegant per una llista paginada darticles, ordenats de certa manera, podem emmagatzemar lajustament de la classificació.</li>
</ul>
<p>L'alternativa al client per emmagatzemar informació al navegador és l'objecte <a href="https://developer.mozilla.org/es/docs/Web/API/Window/localStorage">LocalStorage</a>.</p>
<h3 id="sessio">Sessió<a class="headerlink" href="#sessio" title="Permanent link">¶</a></h3>
<p>La sessió afegeix la gestió de l'estat a HTTP, emmagatzemant en aquest cas la informació al servidor. Cada visitant té un ID de sessió únic, el qual per defecte s'emmagatzema en una galeta anomenada <code>SESSIONS DE PHP</code>. Si el client no té les galetes actives, l'ID es propaga a cada URL dins del mateix domini. Cada sessió té associat un magatzem de dades mitjançant l'array global <code>$_SESSION</code>, en el qual podem emmagatzemar i recuperar informació.</p>
<p>La sessió comença en executar un script PHP. Es genera un nou ID i es carreguen les dades del magatzem:</p>
<figure style="align: center;">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="img/04sesion.png"><img src="img/04sesion.png" width="700"></a>
<figcaption>Comunicació amb sessió</figcaption>
</figure>
<p>Les operacions que podem fer amb la sessió són:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">session_start</span><span class="p">();</span> <span class="c1">// carga la sesión</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">session_id</span><span class="p">()</span> <span class="c1">// devuelve el id</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nx">clave</span><span class="p">]</span> <span class="o">=</span> <span class="nx">valor</span><span class="p">;</span> <span class="c1">// inserción</span>
<span class="linenos" data-linenos="5 "></span><span class="nb">session_destroy</span><span class="p">();</span> <span class="c1">// destruye la sesión</span>
<span class="linenos" data-linenos="6 "></span><span class="nb">unset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nx">clave</span><span class="p">];</span> <span class="c1">// borrado</span>
</code></pre></div>
<p>Vegem mitjançant un exemple com podem inserir en una pàgina dades a la sessió per posteriorment a una altra pàgina accedir a aquestes dades. Per exemple, a <code>sessió1.php</code> tindríem</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">session_start</span><span class="p">();</span> <span class="c1">// inicializamos</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"ies"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IES Severo Ochoa"</span><span class="p">;</span> <span class="c1">// asignación</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$instituto</span> <span class="o">=</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"ies"</span><span class="p">];</span> <span class="c1">// recuperación</span>
<span class="linenos" data-linenos="5 "></span><span class="k">echo</span> <span class="s2">"Estamos en el </span><span class="si">$instituto</span><span class="s2"> "</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="cp">?&gt;</span>
<span class="linenos" data-linenos="7 "></span><span class="x">&lt;br/&gt;</span>
<span class="linenos" data-linenos="8 "></span><span class="x">&lt;a href="sesion2.php"&gt;Y luego&lt;/a&gt;</span>
</code></pre></div>
<p>I posteriorment podem accedir a la sessió a <code>sesion2.php</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$instituto</span> <span class="o">=</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"ies"</span><span class="p">];</span> <span class="c1">// recuperación</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="s2">"Otra vez, en el </span><span class="si">$instituto</span><span class="s2"> "</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Configurant la sessió a <code>php.ini</code></p>
<p>Les següents propietats de <code>php.ini</code> permeten configurar alguns aspectes de la sessió:</p>
<ul>
<li>
<p><code>session.save_handler</code>: controlador que gestiona com s'emmagatzema (<code>files</code>)</p>
</li>
<li>
<p><code>session.save_path</code>: ruta on s'emmagatzemen els fitxers amb les dades (si tenim un clúster, podríem utilitzar <code>/mnt/sessions</code> a tots els servidors de manera que apunten a una carpeta compartida)</p>
</li>
<li>
<p><code>session.name</code>: nom de la sessió (<code>PHSESSID</code>)</p>
</li>
<li>
<p><code>session.auto_start</code>: Es pot fer que s'autocarregui amb cada script. Per defecte està deshabilitat</p>
</li>
<li>
<p><code>session.cookie_lifetime</code>: temps de vida per defecte</p>
</li>
</ul>
<p>Més informació a la <a href="https://www.php.net/manual/es/session.configuration.php">documentació oficial</a>.</p>
</div>
<h2 id="autenticacio-dusuaris">Autenticació d'usuaris<a class="headerlink" href="#autenticacio-dusuaris" title="Permanent link">¶</a></h2>
<p>Una sessió estableix una relació anònima amb un usuari particular, de manera que podem saber si és el mateix usuari entre dues peticions diferents. Si preparem un sistema de login, podrem saber qui utilitza la nostra aplicació.</p>
<p>Per això, preparem un senzill sistema d'autenticació:</p>
<ul>
<li>Mostra el formulari login/password</li>
<li>Comprovar les dades enviades</li>
<li>Afegir el login a la sessió</li>
<li>Comprovar el login a la sessió per realitzar tasques específiques de l'usuari</li>
<li>Eliminar el login de la sessió quan lusuari la tanca.</li>
</ul>
<p>Veurem en codi cada pas del procés. Comencem amb l'arxiu <code>index.php</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">&lt;form action='login.php' method='post'&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">  &lt;fieldset&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">    &lt;legend&gt;Login&lt;/legend&gt;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">    &lt;div&gt;&lt;span class='error'&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$error</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/span&gt;&lt;/div&gt;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    &lt;div class='fila'&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">        &lt;label for='usuario'&gt;Usuario:&lt;/label&gt;&lt;br/&gt;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">        &lt;input type='text' name='inputUsuario' id='usuario' maxlength="50" /&gt;&lt;br/&gt;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">    &lt;/div&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">    &lt;div class='fila'&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="x">        &lt;label for='password'&gt;Contraseña:&lt;/label&gt;&lt;br/&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        &lt;input type='password' name='inputPassword' id='password' maxlength="50" /&gt;&lt;br/&gt;</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    &lt;/div&gt;</span>
<span class="linenos" data-linenos="13 "></span><span class="x">    &lt;div class='fila'&gt;</span>
<span class="linenos" data-linenos="14 "></span><span class="x">        &lt;input type='submit' name='enviar' value='Enviar' /&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="x">    &lt;/div&gt;</span>
<span class="linenos" data-linenos="16 "></span><span class="x">  &lt;/fieldset&gt;</span>
<span class="linenos" data-linenos="17 "></span><span class="x">  &lt;/form&gt;</span>
</code></pre></div>
<p>En fer <em>submit</em> ens porta a <code>login.php</code>, el qual fa de controlador:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">// Comprobamos si ya se ha enviado el formulario</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'enviar'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="nv">$usuario</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'inputUsuario'</span><span class="p">];</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'inputPassword'</span><span class="p">];</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="c1">// validamos que recibimos ambos parámetros</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$usuario</span><span class="p">)</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$password</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="nv">$error</span> <span class="o">=</span> <span class="s2">"Debes introducir un usuario y contraseña"</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">include</span> <span class="s2">"index.php"</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$usuario</span> <span class="o">==</span> <span class="s2">"admin"</span> <span class="o">&amp;&amp;</span> <span class="nv">$password</span> <span class="o">==</span> <span class="s2">"admin"</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>            <span class="c1">// almacenamos el usuario en la sesión</span>
<span class="linenos" data-linenos="14 "></span>            <span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos="15 "></span>            <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'usuario'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$usuario</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>            <span class="c1">// cargamos la página principal</span>
<span class="linenos" data-linenos="17 "></span>            <span class="k">include</span> <span class="s2">"main.php"</span><span class="p">;</span>
<span class="linenos" data-linenos="18 "></span>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>            <span class="c1">// Si las credenciales no son válidas, se vuelven a pedir</span>
<span class="linenos" data-linenos="20 "></span>            <span class="nv">$error</span> <span class="o">=</span> <span class="s2">"Usuario o contraseña no válidos!"</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>            <span class="k">include</span> <span class="s2">"index.php"</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="24 "></span><span class="p">}</span>
</code></pre></div>
<p>Depenent de l'usuari que s'hagi llogat, anirem a una vista oa una altra. Per exemple, a <code>main.php</code> tindríem:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>&lt;?php
<span class="linenos" data-linenos=" 2 "></span>    // Recuperamos la información de la sesión
<span class="linenos" data-linenos=" 3 "></span>    if(!isset($_SESSION)) {
<span class="linenos" data-linenos=" 4 "></span>        session_start();
<span class="linenos" data-linenos=" 5 "></span>    }
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    // Y comprobamos que el usuario se haya autentificado
<span class="linenos" data-linenos=" 8 "></span>    if (!isset($_SESSION['usuario'])) {
<span class="linenos" data-linenos=" 9 "></span>       die("Error - debe &lt;a href='index.php'&gt;identificarse&lt;/a&gt;.&lt;br/&gt;");
<span class="linenos" data-linenos="10 "></span>    }
<span class="linenos" data-linenos="11 "></span>?&gt;
<span class="linenos" data-linenos="12 "></span>&lt;!DOCTYPE html&gt;
<span class="linenos" data-linenos="13 "></span>&lt;html lang="es"&gt;
<span class="linenos" data-linenos="14 "></span>&lt;head&gt;
<span class="linenos" data-linenos="15 "></span>    &lt;meta charset="UTF-8"&gt;
<span class="linenos" data-linenos="16 "></span>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
<span class="linenos" data-linenos="17 "></span>    &lt;title&gt;Listado de productos&lt;/title&gt;
<span class="linenos" data-linenos="18 "></span>&lt;/head&gt;
<span class="linenos" data-linenos="19 "></span>&lt;body&gt;
<span class="linenos" data-linenos="20 "></span>    &lt;h1&gt;Bienvenido &lt;?= $_SESSION['usuario'] ?&gt;&lt;/h1&gt;
<span class="linenos" data-linenos="21 "></span>    &lt;p&gt;Pulse &lt;a href="logout.php"&gt;aquí&lt;/a&gt; para salir&lt;/p&gt;
<span class="linenos" data-linenos="22 "></span>    &lt;p&gt;Volver al &lt;a href="main.php"&gt;inicio&lt;/a&gt;&lt;/p&gt;
<span class="linenos" data-linenos="23 "></span>    &lt;h2&gt;Listado de productos&lt;/h2&gt;
<span class="linenos" data-linenos="24 "></span>    &lt;ul&gt;
<span class="linenos" data-linenos="25 "></span>        &lt;li&gt;Producto 1&lt;/li&gt;
<span class="linenos" data-linenos="26 "></span>        &lt;li&gt;Producto 2&lt;/li&gt;
<span class="linenos" data-linenos="27 "></span>        &lt;li&gt;Producto 3&lt;/li&gt;
<span class="linenos" data-linenos="28 "></span>    &lt;/ul&gt;
<span class="linenos" data-linenos="29 "></span>&lt;/body&gt;
<span class="linenos" data-linenos="30 "></span>&lt;/html&gt;
</code></pre></div>
<p>Finalment, necessitem l'opció de tancar la sessió que col·loquem a <code>logout.php</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// Recuperamos la información de la sesión</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="c1">// Y la destruimos</span>
<span class="linenos" data-linenos="6 "></span><span class="nb">session_destroy</span><span class="p">();</span>
<span class="linenos" data-linenos="7 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Location: index.php"</span><span class="p">);</span>
<span class="linenos" data-linenos="8 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Autenticació en producció</p>
<p>Actualment l'autenticació d'usuari no es realitza gestionant la sessió directament, sinó que es realitza mitjançant altres mecanismes que veurem d'aquí poc.</p>
</div>
<h2 id="referencies">Referències<a class="headerlink" href="#referencies" title="Permanent link">¶</a></h2>
<ul>
<li><a href="https://www.php.net/manual/es/features.cookies.php">Galetes en PHP</a></li>
<li><a href="https://www.php.net/manual/es/book.session.php">Maneig de sessions en PHP</a></li>
</ul>
<h2 id="activitats">Activitats<a class="headerlink" href="#activitats" title="Permanent link">¶</a></h2>
<ol start="401">
<li><code>401server.php</code>: igual que l'exemple vist als apunts, mostra els valors de <code>$_SERVER</code> en executar un script al vostre ordinador.<br>
     Prova de passar-li paràmetres per GET (ia no passar-ne cap).<br>
     Prepara un formulari (<code>401post.html</code>) que faci un enviament per POST i comprova-ho de nou.<br>
     Crea una pàgina (<code>401enllaç.html</code>) que tingui un enllaç a <code>401server.php</code> i comprova el valor de <code>HTTP_REFERER</code>.</li>
</ol>
<h3 id="formularis_1">Formularis<a class="headerlink" href="#formularis_1" title="Permanent link">¶</a></h3>
<ol start="402">
<li><code>402formulario.html</code> i <code>402formulario.php</code>: Crea un formulari que sol·liciti:</li>
</ol>
<ul>
<li>
<p>Nom i cognoms.</p>
</li>
<li>
<p>Correu electrònic.</p>
</li>
<li>
<p>URL pàgina personal.</p>
</li>
<li>
<p>Sexe (ràdio).</p>
</li>
<li>
<p>Nombre de convivents al domicili.</p>
</li>
<li>
<p>Aficions (checkboxes) – posar mínim 4 valors.</p>
</li>
<li>
<p>Menú favorit (llista selecció múltiple) – posar mínim 4 valors.</p>
</li>
</ul>
<p>Mostra els valors carregats en una taula resum.</p>
<ol start="403">
<li>
<p><code>403validacion.php</code>: A partir del formulari anterior, introduïu validacions en HTML mitjançant l'atribut <code>requerit</code> dels camps (uso els tipus adequats per a cada camp), i en comprova els tipus de les dades i que compleixen els valors esperats (per exemple, als checkboxes que els valors recollits formen part de tots els possibles). Pots provar de passar-li dades errònies via URL i comprovar-ne el comportament.<br>
     Tipus: Investiga l'ús de la funció <code>variable_filtre</code>.</p>
</li>
<li>
<p><code>404subida.html</code> i <code>404subida.php</code>: Crea un formulari que permeti pujar un fitxer al servidor. A més del fitxer, heu de demanar al mateix formulari dos camps numèrics que sol·licitin l'amplada i l'alçada. Comproveu que tant el fitxer com les dades arriben correctament.</p>
</li>
<li>
<p><code>405subidaImagen.php</code>: Modifica l'exercici anterior perquè només permeti pujar imatges (comprova la propietat <code>tipus</code> del fitxer pujat). Si l'usuari selecciona un altre tipus de fitxers, se us ha d'informar de l'error i permetre que pugeu un fitxer nou.<br>
     En cas de pujar el tipus correcte, visualitzar la imatge amb la mida d'amplada i alçada rebut com a paràmetre.</p>
</li>
</ol>
<h3 id="galetes-i-sessio">Galetes i Sessió<a class="headerlink" href="#galetes-i-sessio" title="Permanent link">¶</a></h3>
<ol start="406">
<li>
<p><code>406contadorVisitas.php</code>: Mitjançant l'ús de cookies, informa l'usuari de si és la primera visita, o si no ho és, mostri el seu valor (valor d'un comptador). A més, has de permetre que l'usuari reinicialitzi el comptador de visites.</p>
</li>
<li>
<p><code>407fondo.php</code>: Mitjançant l'ús de cookies, creeu una pàgina amb un desplegable amb diversos colors, de manera que l'usuari pugui canviar el color de fons de la pàgina (atribut <code>color de fons</code>). En tancar la pàgina, aquesta ha de recordar, almenys durant 24h, el color triat i la propera vegada que es carregui la pàgina, ho faci amb el darrer color seleccionat.</p>
</li>
<li>
<p><code>408fondoSesion1.php</code>: Modifica l'exercici anterior per emmagatzemar el color de fons a la sessió i no emprar cookies. A més, ha de contenir un enllaç al següent fitxer. <code>408fondoSesion2.php</code>: Heu de mostrar el color i donar la possibilitat de: * tornar a la pàgina anterior mitjançant un enllaç * i mitjançant un altre enllaç, buidar la sessió i tornar a la pàgina anterior.</p>
</li>
<li>
<p>Fent ús de la sessió, dividirem el formulari de l'exercici <code>402formulario.php</code> en 2 subformularis:</p>
</li>
</ol>
<ul>
<li>
<p><code>409formulari1.php</code> envia les dades (nom i cognoms, email, url i sexe) a <code>409formulari2.php</code>.</p>
</li>
<li>
<p><code>409formulari2.php</code> llegeix les dades i les fica a la sessió. A continuació, mostra la resta de camps del formulari que cal omplir (convivents, aficions i menú). Envieu aquestes dades a <code>409formulari3.php</code>.</p>
</li>
<li>
<p><code>409formulari3.php</code> recull les dades enviades al pas anterior i al costat de les que ja estaven a la sessió, es mostren totes les dades en una taula/llista desordenada.</p>
</li>
</ul>
<h3 id="autenticacio">Autenticació<a class="headerlink" href="#autenticacio" title="Permanent link">¶</a></h3>
<p>En els exercicis següents muntarem una estructura d'inici de sessió similar a la vista en els apunts.</p>
<ol start="410">
<li><code>410index.php</code>: formulari d'inici de sessió</li>
<li><code>411login.php</code>: fa de controlador, per la qual cosa ha de comprovar les dades rebudes (només permet l'entrada de <code>usuari/usuari</code> i si tot és correcte, cedir el control a la vista del següent exercici. No conté codi HTML.</li>
<li><code>412pel·lícules.php</code>: vista que mostra com a títol "Llistat de Pel·lícules", i una llista desordenada amb tres pel·lícules.</li>
<li><code>413logout.php</code>: buida la sessió i ens porta novament al formulari d'inici de sessió. No conté codi HTML</li>
<li><code>414sèrie.php</code>: Afegeix una nova vista similar a <code>412pel·lícules.php</code> que mostra un "Llistat de Sèries" amb una llista desordenada amb tres sèries. Tant <code>412pelicuas.php</code> com la vista recent creades, han de tenir un petit menú (senzill, mitjançant enllaços) que permeti passar d'un llistat a un altre. Comproveu que si s'accedeix directament a qualsevol de les vistes sense tenir un usuari <em>loguejat</em> via URL del navegador, no es mostra el llistat.</li>
<li>Modifica tant el controlador com les vistes perquè: * les dades les obtingui el controlador (magatzema a la sessió un array de pel·lícules i un altre de sèries) * col·loqui les dades a la sessió * A les vistes, les dades es recuperen de la sessió i es <em>pinten</em> a la llista desordenada recorrent l'array corresponent.</li>
</ol>
<h3 id="projecte-videoclub-30">Projecte Videoclub 3.0<a class="headerlink" href="#projecte-videoclub-30" title="Permanent link">¶</a></h3>
<ol start="420">
<li>
<p>Per al Videoclub, crearem una pàgina <code>index.php</code> amb un formulari que contingui un formulari de login/password. Es comprovaran les dades a <code>iniciar sessió.php</code>. Els possibles usuaris són admin/admin o usuari/usuari * Si l'usuari és correcte, a <code>main.php</code> mostrar un missatge de benvinguda amb el nom de lusuari, al costat dun enllaç per tancar la sessió, que el portaria de nou al login. * Si l'usuari és incorrecte, heu de tornar a carregar el formulari donant informació a l'usuari d'accés incorrecte.</p>
</li>
<li>
<p>Si l'usuari és administrador, es carregaran a la sessió les dades de suports i clients del videoclub que teníem a les nostres proves. A la següent unitat els obtindrem de la base de dades. A <code>mainAdmin.php</code>, a més de la benvinguda, ha de mostrar: * Llistat de clients * Llistat de suports</p>
</li>
</ol>
<p>Esquema navegació exercici 423</p>
<ol start="422">
<li>
<p>modificarem la classe <code>Client</code> per emmagatzemar el <code>usuari</code> i la <code>contrasenya</code> de cada client. Després de codificar els canvis, modificar el llistat de clients de <code>mainAdmin.php</code> per afegir al llistat lusuari.</p>
</li>
<li>
<p>Si l'usuari que hi accedeix no és administrador i coincideix amb algun dels clients que tenim carregats després del login, heu de carregar <code>client_principal.php</code> on es mostrarà una llista dels lloguers del client. Per això, modificarem la classe <code>Client</code> per oferir el mètode <code>getAlquileres() : array</code>, el qual trucarem i després recorrerem per mostrar el llistat sol·licitat.</p>
</li>
</ol>
<p>Ara tornem a la part d'administració</p>
<ol start="424">
<li>
<p>A més de mostrar el llistat de clients, oferirem l'opció de donar d'alta a un nou client a <code>formulariCreaClient.php</code>. Les dades s'enviaran mitjançant POST a <code>createClient.php</code> que els introduirà a la sessió. Un cop creat el client, ha de tornar a carregar <code>mainAdmin.php</code> on es podrà veure el client inserit. Si hi ha alguna dada incorrecta, heu de tornar a carregar el formulari d'alta.</p>
</li>
<li>
<p>Crea a <code>formUpdateClient.php</code> un formulari que permet editar les dades d'un client. Has de recollir les dades a <code>actualitzacióClient.php</code> Les dades de client s'han de poder modificar des de la pròpia pàgina d'un client i des del llistat de l'administrador.</p>
</li>
<li>
<p>Des del llistat de clients de l'administrador heu d'oferir la possibilitat d'esborrar un client. Al navegador, abans de redirigir al servidor, l'usuari ha de confirmar mitjançant JS que realment voleu eliminar el client. Finalment, a <code>eliminarClient.php</code> elimina el client de la sessió. Un cop eliminat, ha de tornar al llistat de clients.</p>
</li>
</ol>
<p>Esquema navegació Videoclub 3.0</p>
<h1 id="programacion-web">Programación Web<a class="headerlink" href="#programacion-web" title="Permanent link">¶</a></h1>
<details class="abstract">
<summary>Duración y criterios de evaluación</summary>
<p>Duración estimada: 12 sesiones</p>
<hr>
<table>
<thead>
<tr>
<th>Resultado de aprendizaje</th>
<th>Criterios de evaluación</th>
</tr>
</thead>
<tbody>
<tr>
<td>4. Desarrolla aplicaciones Web embebidas en lenguajes de marcas analizando e incorporando funcionalidades según especificaciones.</td>
<td>a) Se han identificado los mecanismos disponibles para el mantenimiento de la información que concierne a un cliente web concreto y se han señalado sus ventajas.<br> b) Se han utilizado sesiones para mantener el estado de las aplicaciones Web. <br> c) Se han utilizado <em>cookies</em> para almacenar información en el cliente Web y para recuperar su contenido. <br> d) Se han identificado y caracterizado los mecanismos disponibles para la autentificación de usuarios. <br> e) Se han escrito aplicaciones que integren mecanismos de autentificación de usuarios. <br> f) Se han realizado adaptaciones a aplicaciones Web existentes como gestores de contenidos u otras. <br> g) Se han utilizado herramientas y entornos para facilitar la programación, prueba y depuración del código.</td>
</tr>
</tbody>
</table>
</details>
<h2 id="variables-de-servidor_1">Variables de servidor<a class="headerlink" href="#variables-de-servidor_1" title="Permanent link">¶</a></h2>
<p>PHP almacena la información del servidor y de las peticiones HTTP en seis vectors globales:</p>
<ul>
<li><code>$_ENV</code>: información sobre las variables de entorno</li>
<li><code>$_GET</code>: parámetros enviados en la petición GET</li>
<li><code>$_POST</code>: parámetros enviados en el envio POST</li>
<li><code>$_COOKIE</code>: contiene las cookies de la petición, las claves del array son los nombres de las <em>cookies</em></li>
<li><code>$_SERVER</code>: información sobre el servidor</li>
<li><code>$_FILES</code>: información sobre los ficheros cargados via upload</li>
</ul>
<p>Si nos centramos en el array <code>$_SERVER</code> podemos consultar las siguientes propiedades:</p>
<ul>
<li><code>PHP_SELF</code>: nombre del script ejecutado, relativo al document root (p.ej: <code>/tienda/carrito.php</code>)</li>
<li><code>SERVER_SOFTWARE</code>: (p.ej: Apache)</li>
<li><code>SERVER_NAME</code>: dominio, alias DNS (p.ej: <code>www.elche.es</code>)</li>
<li><code>REQUEST_METHOD</code>: GET</li>
<li><code>REQUEST_URI</code>: URI, sin el dominio</li>
<li><code>QUERY_STRING</code>: todo lo que va después de <code>?</code> en la URL (p.ej: <code>heroe=Batman&amp;nombre=Bruce</code>)</li>
</ul>
<p>Más información en <a href="https://www.php.net/manual/es/reserved.variables.server.php">https://www.php.net/manual/es/reserved.variables.server.php</a></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"PHP_SELF"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// /u4/401server.php</span>
<span class="linenos" data-linenos="3 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"SERVER_SOFTWARE"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// Apache/2.4.46 (Win64) OpenSSL/1.1.1g PHP/7.4.9</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"SERVER_NAME"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// localhost</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"REQUEST_METHOD"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// GET</span>
<span class="linenos" data-linenos="7 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"REQUEST_URI"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// /u4/401server.php?heroe=Batman</span>
<span class="linenos" data-linenos="8 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"QUERY_STRING"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// heroe=Batman</span>
</code></pre></div>
<p>Otras propiedades relacionadas:</p>
<ul>
<li><code>PATH_INFO</code>: ruta extra tras la petición. Si la URL es <code>http://www.php.com/php/pathInfo.php/algo/cosa?foo=bar</code>, entonces <code>$_SERVER['PATH_INFO']</code> será <code>/algo/cosa</code>.</li>
<li><code>REMOTE_HOST</code>: hostname que hizo la petición</li>
<li><code>REMOTE_ADDR</code>: IP del cliente</li>
<li><code>AUTH_TYPE</code>: tipo de autenticación (p.ej: Basic)</li>
<li><code>REMOTE_USER</code>: nombre del usuario autenticado</li>
</ul>
<p>Apache crea una clave para cada cabecera HTTP, en mayúsculas y sustituyendo los guiones por subrayados:</p>
<ul>
<li><code>HTTP_USER_AGENT</code>: agente (navegador)</li>
<li><code>HTTP_REFERER</code>: página desde la que se hizo la petición</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"HTTP_USER_AGENT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"&lt;br&gt;"</span><span class="p">;</span> <span class="c1">// Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36</span>
</code></pre></div>
<h2 id="formularios">Formularios<a class="headerlink" href="#formularios" title="Permanent link">¶</a></h2>
<p>A la hora de enviar un formulario, debemos tener claro cuando usar GET o POST</p>
<ul>
<li>
<p>GET: los parámetros se pasan en la URL</p>
<ul>
<li>&lt;2048 caracteres, sólo ASCII</li>
<li>Permite almacenar la dirección completa (marcador  / historial)</li>
<li>Idempotente: dos llamadas con los mismos datos siempre debe dar el mismo resultado</li>
<li>El navegador puede cachear las llamadas</li>
</ul>
</li>
<li>
<p>POST: parámetros ocultos (no encriptados)</p>
<ul>
<li>Sin límite de datos, permite datos binarios.</li>
<li>No se pueden cachear</li>
<li>No idempotente → actualizar la BBDD</li>
</ul>
</li>
</ul>
<p>Así pues, para recoger los datos accederemos al array dependiendo del método del formulario que nos ha invocado:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$par</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">]</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$par</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">]</span>
</code></pre></div>
<p>Para los siguientes apartados nos vamos a basar en el siguiente ejemplo:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">"formulario.php"</span> <span class="na">method</span><span class="o">=</span><span class="s">"GET"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"nombre"</span><span class="p">&gt;</span>Nombre del alumno:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span>        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"nombre"</span> <span class="na">id</span><span class="o">=</span><span class="s">"nombre"</span> <span class="na">value</span><span class="o">=</span><span class="s">""</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"modulos[]"</span> <span class="na">id</span><span class="o">=</span><span class="s">"modulosDWES"</span> <span class="na">value</span><span class="o">=</span><span class="s">"DWES"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"modulosDWES"</span><span class="p">&gt;</span>Desarrollo web en entorno servidor<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"modulos[]"</span> <span class="na">id</span><span class="o">=</span><span class="s">"modulosDWEC"</span> <span class="na">value</span><span class="o">=</span><span class="s">"DWEC"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="11 "></span>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"modulosDWEC"</span><span class="p">&gt;</span>Desarrollo web en entorno cliente<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Enviar"</span> <span class="na">name</span><span class="o">=</span><span class="s">"enviar"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="validacion">Validación<a class="headerlink" href="#validacion" title="Permanent link">¶</a></h3>
<p>Respecto a la validación, es conveniente siempre hacer <strong>validación doble</strong>:</p>
<ul>
<li>En el cliente mediante JS</li>
<li>En servidor, antes de llamar a negocio, es conveniente volver a validar los datos.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="nv">$par</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"parametro"</span><span class="p">];</span>
<span class="linenos" data-linenos="4 "></span>    <span class="c1">// comprobar si $par tiene el formato adecuado, su valor, etc...</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Librerías de validación</p>
<p>Existen diversas librerías que facilitan la validación de los formularios, como son <a href="https://respect-validation.readthedocs.io/en/latest/">respect/validation</a> o <a href="http://validator.particle-php.com/en/latest/">particle/validator</a>.
Cuando estudiemos Laravel profundizaremos en la validación de forma declarativa.</p>
</div>
<h3 id="parametro-multivalor">Parámetro multivalor<a class="headerlink" href="#parametro-multivalor" title="Permanent link">¶</a></h3>
<p>Existen elementos HTML que envían varios valores:</p>
<ul>
<li><code>select multiple</code></li>
<li><code>checkbox</code></li>
</ul>
<p>Para recoger los datos, el nombre del elemento debe ser un array.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">select</span> <span class="na">name</span><span class="o">=</span><span class="s">"lenguajes[]"</span> <span class="na">multiple</span><span class="o">=</span><span class="s">"true"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"c"</span><span class="p">&gt;</span>C<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"java"</span><span class="p">&gt;</span>Java<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"php"</span><span class="p">&gt;</span>PHP<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">"python"</span><span class="p">&gt;</span>Python<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"lenguajes[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"c"</span> <span class="p">/&gt;</span> C<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"lenguajes[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"java"</span> <span class="p">/&gt;</span> Java<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"lenguajes[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"php"</span> <span class="p">/&gt;</span> Php<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"lenguajes[]"</span> <span class="na">value</span><span class="o">=</span><span class="s">"python"</span> <span class="p">/&gt;</span> Python<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</code></pre></div>
<p>De manera que luego al recoger los datos:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$lenguajes</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s2">"lenguajes"</span><span class="p">];</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$lenguajes</span> <span class="k">as</span> <span class="nv">$lenguaje</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>    <span class="k">echo</span> <span class="s2">"</span><span class="si">$lenguaje</span><span class="s2"> &lt;br/&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="volviendo-a-rellenar-un-formulario">Volviendo a rellenar un formulario<a class="headerlink" href="#volviendo-a-rellenar-un-formulario" title="Permanent link">¶</a></h3>
<p>Un <em>sticky form</em> es un formulario que recuerda sus valores. Para ello, hemos de rellenar los atributos <code>value</code> de los elementos HTML con la información que contenían:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'modulos'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nombre'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="c1">// Dades vàlides</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="nv">$nombre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nombre'</span><span class="p">]</span> <span class="o">??</span> <span class="s2">""</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="nv">$modulos</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'modulos'</span><span class="p">]</span> <span class="o">??</span> <span class="p">[];</span>
<span class="linenos" data-linenos=" 7 "></span><span class="cp">?&gt;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">"</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'PHP_SELF'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="na">method</span><span class="o">=</span><span class="s">"POST"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"nombre"</span><span class="p">&gt;</span>Nom:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"nombre"</span> <span class="na">id</span><span class="o">=</span><span class="s">"nombre"</span> <span class="na">value</span><span class="o">=</span><span class="s">"</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"modulos[]"</span> <span class="na">id</span><span class="o">=</span><span class="s">"modulosDWES"</span> <span class="na">value</span><span class="o">=</span><span class="s">"DWES"</span>
<span class="linenos" data-linenos="12 "></span>        <span class="cp">&lt;?</span><span class="o">=</span> <span class="nb">in_array</span><span class="p">(</span><span class="s1">'DWES'</span><span class="p">,</span> <span class="nv">$modulos</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'checked'</span> <span class="o">:</span> <span class="s1">''</span> <span class="cp">?&gt;</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="13 "></span>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"modulosDWES"</span><span class="p">&gt;</span>Entorn servidor<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"checkbox"</span> <span class="na">name</span><span class="o">=</span><span class="s">"modulos[]"</span> <span class="na">id</span><span class="o">=</span><span class="s">"modulosDWEC"</span> <span class="na">value</span><span class="o">=</span><span class="s">"DWEC"</span>
<span class="linenos" data-linenos="15 "></span>        <span class="cp">&lt;?</span><span class="o">=</span> <span class="nb">in_array</span><span class="p">(</span><span class="s1">'DWEC'</span><span class="p">,</span> <span class="nv">$modulos</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'checked'</span> <span class="o">:</span> <span class="s1">''</span> <span class="cp">?&gt;</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"modulosDWEC"</span><span class="p">&gt;</span>Entorn client<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="17 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Enviar"</span> <span class="na">name</span><span class="o">=</span><span class="s">"enviar"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="18 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="19 "></span><span class="cp">&lt;?php</span> <span class="p">}</span> <span class="cp">?&gt;</span>
</code></pre></div>
<h3 id="subiendo-archivos">Subiendo archivos<a class="headerlink" href="#subiendo-archivos" title="Permanent link">¶</a></h3>
<p>Se almacenan en el servidor en el array <code>$_FILES</code> con el nombre del campo del tipo <code>file</code> del formulario.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">enctype</span><span class="o">=</span><span class="s">"multipart/form-data"</span> <span class="na">action</span><span class="o">=</span><span class="s">"&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;"</span>  <span class="na">method</span><span class="o">=</span><span class="s">"POST"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="2 "></span>    Archivo: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">name</span><span class="o">=</span><span class="s">"archivoEnviado"</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="3 "></span>    <span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">name</span><span class="o">=</span><span class="s">"btnSubir"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Subir"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
<p>Configuración en <code>php.ini</code></p>
<ul>
<li><code>file_uploads</code>: on / off</li>
<li><code>upload_max_filesize</code>: 2M</li>
<li><code>upload_tmp_dir</code>: directorio temporal. No es necesario configurarlo, cogerá el predeterminado del sistema</li>
<li><code>post_max_size</code>: tamaño máximo de los datos POST. Debe ser mayor a upload_max_filesize.</li>
<li><code>max_file_uploads</code>: número máximo de archivos que se pueden cargar a la vez.</li>
<li><code>max_input_time</code>: tiempo máximo empleado en la carga (GET/POST y upload → normalmente se configura en 60)</li>
<li><code>memory_limit</code>: 128M</li>
<li><code>max_execution_time</code>: tiempo de ejecución de un script (no tiene en cuenta el upload)</li>
</ul>
<p>Para cargar los archivos, accedemos al array <code>$_FILES</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'btnSubir'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'btnSubir'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Subir'</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">is_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>        <span class="nv">$nombre</span> <span class="o">=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]);</span>
<span class="linenos" data-linenos="5 "></span>        <span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'archivoEnviado'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span> <span class="s2">"./uploads/</span><span class="si">{</span><span class="nv">$nombre</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos="6 "></span>        <span class="k">echo</span> <span class="s2">"&lt;p&gt;Fitxer </span><span class="si">$nombre</span><span class="s2"> pujat amb èxit&lt;/p&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
<span class="linenos" data-linenos="9 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<p>Cada archivo cargado en <code>$_FILES</code> tiene:</p>
<ul>
<li><code>name</code>: nombre</li>
<li><code>tmp_name</code>: ruta temporal</li>
<li><code>size</code>: tamaño en bytes</li>
<li><code>type</code>: tipo MIME</li>
<li><code>error</code>: si hay error, contiene un mensaje. Si ok → 0.</li>
</ul>
<h2 id="cabeceras-de-respuesta">Cabeceras de respuesta<a class="headerlink" href="#cabeceras-de-respuesta" title="Permanent link">¶</a></h2>
<p>Debe ser lo primero a devolver. Se devuelven mediante la función <code>header(cadena)</code>. Mediante las cabeceras podemos configurar el tipo de contenido, tiempo de expiración, redireccionar el navegador, especificar errores HTTP, etc.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span> <span class="nb">header</span><span class="p">(</span><span class="s2">"Content-Type: text/plain"</span><span class="p">);</span> <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="cp">&lt;?php</span> <span class="nb">header</span><span class="p">(</span><span class="s2">"Location: http://www.ejemplo.com/inicio.html"</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="k">exit</span><span class="p">();</span> 
</code></pre></div>
<p>Se puede comprobar en las herramientas del desarrollador de los navegadores web mediante <em>Developer Tools → Network → Headers</em>.</p>
<p>Es muy común configurar las cabeceras para evitar consultas a la caché o provocar su renovación:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: Sun, 31 Jan 2021 23:59:59 GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">// tres horas</span>
<span class="linenos" data-linenos=" 4 "></span><span class="nv">$now</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="linenos" data-linenos=" 5 "></span><span class="nv">$horas3</span> <span class="o">=</span> <span class="nb">gmstrftime</span><span class="p">(</span><span class="s2">"%a, %d %b %Y %H:%M:%S GMT"</span><span class="p">,</span> <span class="nv">$now</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">3</span><span class="p">);</span>
<span class="linenos" data-linenos=" 6 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: </span><span class="si">{</span><span class="nv">$horas3</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">// un año</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$now</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$anyo1</span> <span class="o">=</span> <span class="nb">gmstrftime</span><span class="p">(</span><span class="s2">"%a, %d %b %Y %H:%M:%S GMT"</span><span class="p">,</span> <span class="nv">$now</span> <span class="o">+</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">86440</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: </span><span class="si">{</span><span class="nv">$anyo1</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">// se marca como expirado (fecha en el pasado)</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$pasado</span> <span class="o">=</span> <span class="nb">gmstrftime</span><span class="p">(</span><span class="s2">"%a, %d %b %Y %H:%M:%S GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: </span><span class="si">{</span><span class="nv">$pasado</span><span class="si">}</span><span class="s2">"</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">// evitamos cache de navegador y/o proxy</span>
<span class="linenos" data-linenos="15 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Expires: Mon, 26 Jul 1997 05:00:00 GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos="16 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Last-Modified: "</span> <span class="o">.</span> <span class="nb">gmdate</span><span class="p">(</span><span class="s2">"D, d M Y H:i:s"</span><span class="p">)</span> <span class="o">.</span> <span class="s2">" GMT"</span><span class="p">);</span>
<span class="linenos" data-linenos="17 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Cache-Control: no-store, no-cache, must-revalidate"</span><span class="p">);</span>
<span class="linenos" data-linenos="18 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Cache-Control: post-check=0, pre-check=0"</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="linenos" data-linenos="19 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Pragma: no-cache"</span><span class="p">);</span>
</code></pre></div>
<h2 id="gestion-del-estado">Gestión del estado<a class="headerlink" href="#gestion-del-estado" title="Permanent link">¶</a></h2>
<p>HTTP es un protocolo <em>stateless</em>, sin estado. Por ello, se simula el estado mediante el uso de cookies, tokens o la sesión. El estado es necesario para procesos tales como el carrito de la compra, operaciones asociadas a un usuario, etc...
El mecanismo de PHP para gestionar la sesión emplea cookies de forma interna.
Las cookies se almacenan en el navegador, y la sesión en el servidor web.</p>
<h3 id="cookies">Cookies<a class="headerlink" href="#cookies" title="Permanent link">¶</a></h3>
<p>Las cookies se almacenan en el array global <code>$_COOKIE</code>. Lo que coloquemos dentro del array, se guardará en el cliente. Hay que tener presente que el cliente puede no querer almacenarlas.</p>
<p>Existe una limitació de 20 cookies por dominio y 300 en total en el navegador.</p>
<p>En PHP, para crear una cookie se utiliza la función <code>setcookie</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span> <span class="p">[,</span> <span class="nx">valor</span> <span class="p">[,</span> <span class="nx">expira</span> <span class="p">[,</span> <span class="nx">ruta</span> <span class="p">[,</span> <span class="nx">dominio</span> <span class="p">[,</span> <span class="nx">seguro</span> <span class="p">[,</span> <span class="nx">httponly</span> <span class="p">]]]]]]);</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span> <span class="p">[,</span> <span class="nx">valor</span> <span class="o">=</span> <span class="s2">""</span> <span class="p">[,</span> <span class="nx">opciones</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">]]</span> <span class="p">)</span>
<span class="linenos" data-linenos="4 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<p>Destacar que el nombre no puede contener espacios ni el caracter <code>;</code>. Respecto al contenido de la cookie, no puede superar los 4 KB.</p>
<p>Por ejemplo, mediante <em>cookies</em> podemos comprobar la cantidad de visitas diferentes que realiza un usuario:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$accesosPagina</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">'accesos'</span><span class="p">]))</span> <span class="p">{</span> 
<span class="linenos" data-linenos="4 "></span>    <span class="nv">$accesosPagina</span> <span class="o">=</span> <span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">'accesos'</span><span class="p">];</span> <span class="c1">// recuperamos una cookie</span>
<span class="linenos" data-linenos="5 "></span>    <span class="nb">setcookie</span><span class="p">(</span><span class="s1">'accesos'</span><span class="p">,</span> <span class="o">++</span><span class="nv">$accesosPagina</span><span class="p">);</span> <span class="c1">// le asignamos un valor</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
<span class="linenos" data-linenos="7 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Inspeccionando las cookies</p>
<p>Si queremos ver que contienen las cookies que tenemos almacenadas en el navegador, se puede comprobar su valor en <em>Dev Tools → Application → Storage</em></p>
</div>
<p>El tiempo de vida de las cookies puede ser tan largo como el sitio web en el que residen. Ellas seguirán ahí, incluso si el navegador está cerrado o abierto.</p>
<p>Para borrar una cookie se puede poner que expiren en el pasado:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">// pasado</span>
</code></pre></div>
<p>O que caduquen dentro de un periodo de tiempo deteminado:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">setcookie</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span> <span class="nx">valor</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">3600</span><span class="p">)</span> <span class="c1">// Caducan dentro de una hora</span>
</code></pre></div>
<figure style="align: center;">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="img/04cookies.png"><img src="img/04cookies.png" width="700"></a>
<figcaption>Comunicación con cookies</figcaption>
</figure>
<p>Se utilizan para:</p>
<ul>
<li>Recordar los inicios de sesión</li>
<li>Almacenar valores temporales de usuario</li>
<li>Si un usuario está navegando por una lista paginada de artículos, ordenados de cierta manera, podemos almacenar el ajuste de la clasificación.</li>
</ul>
<p>La alternativa en el cliente para almacenar información en el navegador es el objeto <a href="https://developer.mozilla.org/es/docs/Web/API/Window/localStorage">LocalStorage</a>.</p>
<h3 id="sesion">Sesión<a class="headerlink" href="#sesion" title="Permanent link">¶</a></h3>
<p>La sesión añade la gestión del estado a HTTP, almacenando en este caso la información en el servidor.
Cada visitante tiene un ID de sesión único, el cual por defecto se almacena en una cookie denominada <code>PHPSESSID</code>.
Si el cliente no tiene las cookies activas, el ID se propaga en cada URL dentro del mismo dominio.
Cada sesión tiene asociado un almacén de datos mediante el array global <code>$_SESSION</code>, en el cual podemos almacenar y recuperar información.</p>
<p>La sesión comienza al ejecutar un script PHP. Se genera un nuevo ID y se cargan los datos del almacén:</p>
<figure style="align: center;">
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="img/04sesion.png"><img src="img/04sesion.png" width="700"></a>
<figcaption>Comunicación con sesión</figcaption>
</figure>
<p>Las operaciones que podemos realizar con la sesión son:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">session_start</span><span class="p">();</span> <span class="c1">// carga la sesión</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">session_id</span><span class="p">()</span> <span class="c1">// devuelve el id</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nx">clave</span><span class="p">]</span> <span class="o">=</span> <span class="nx">valor</span><span class="p">;</span> <span class="c1">// inserción</span>
<span class="linenos" data-linenos="5 "></span><span class="nb">session_destroy</span><span class="p">();</span> <span class="c1">// destruye la sesión</span>
<span class="linenos" data-linenos="6 "></span><span class="nb">unset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nx">clave</span><span class="p">];</span> <span class="c1">// borrado</span>
</code></pre></div>
<p>Vamos a ver mediante un ejemplo como podemos insertar en un página datos en la sesión para posteriormente en otra página acceder a esos datos. Por ejemplo, en <code>sesion1.php</code> tendríamos</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">session_start</span><span class="p">();</span> <span class="c1">// inicializamos</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"ies"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"IES Severo Ochoa"</span><span class="p">;</span> <span class="c1">// asignación</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$instituto</span> <span class="o">=</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"ies"</span><span class="p">];</span> <span class="c1">// recuperación</span>
<span class="linenos" data-linenos="5 "></span><span class="k">echo</span> <span class="s2">"Estamos en el </span><span class="si">$instituto</span><span class="s2"> "</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="cp">?&gt;</span>
<span class="linenos" data-linenos="7 "></span><span class="x">&lt;br/&gt;</span>
<span class="linenos" data-linenos="8 "></span><span class="x">&lt;a href="sesion2.php"&gt;Y luego&lt;/a&gt;</span>
</code></pre></div>
<p>Y posteriormente podemos acceder a la sesión en <code>sesion2.php</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$instituto</span> <span class="o">=</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"ies"</span><span class="p">];</span> <span class="c1">// recuperación</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="s2">"Otra vez, en el </span><span class="si">$instituto</span><span class="s2"> "</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Configurando la sesión en <code>php.ini</code></p>
<p>Las siguiente propiedades de <code>php.ini</code> permiten configurar algunos aspectos de la sesión:</p>
<ul>
<li><code>session.save_handler</code>: controlador que gestiona cómo se almacena (<code>files</code>)</li>
<li><code>session.save_path</code>: ruta donde se almacenan los archivos con los datos (si tenemos un cluster, podríamos usar <code>/mnt/sessions</code> en todos los servidor de manera que apuntan a una carpeta compartida)</li>
<li><code>session.name</code>: nombre de la sesión (<code>PHSESSID</code>)</li>
<li><code>session.auto_start</code>: Se puede hacer que se autocargue con cada script. Por defecto está deshabilitado</li>
<li><code>session.cookie_lifetime</code>: tiempo de vida por defecto</li>
</ul>
<p>Más información en la <a href="https://www.php.net/manual/es/session.configuration.php">documentación oficial</a>.</p>
</div>
<h2 id="autentificacion-de-usuarios">Autentificación de usuarios<a class="headerlink" href="#autentificacion-de-usuarios" title="Permanent link">¶</a></h2>
<p>Una sesión establece una relación anónima con un usuario particular, de manera que podemos saber si es el mismo usuario entre dos peticiones distintas. Si preparamos un sistema de login, podremos saber quien utiliza nuestra aplicación.</p>
<p>Para ello, preparemos un sencillo sistema de autenticación:</p>
<ul>
<li>Mostrar el formulario login/password</li>
<li>Comprobar los datos enviados</li>
<li>Añadir el login a la sesión</li>
<li>Comprobar el login en la sesión para realizar tareas específicas del usuario</li>
<li>Eliminar el login de la sesión cuando el usuario la cierra.</li>
</ul>
<p>Vamos a ver en código cada paso del proceso. Comenzamos con el archivo <code>index.php</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">'login.php'</span> <span class="na">method</span><span class="o">=</span><span class="s">'post'</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>  <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="p">&lt;</span><span class="nt">legend</span><span class="p">&gt;</span>Login<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">'error'</span><span class="p">&gt;</span><span class="cp">&lt;?php echo $error; ?&gt;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">'fila'</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">'usuario'</span><span class="p">&gt;</span>Usuario:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">'text'</span> <span class="na">name</span><span class="o">=</span><span class="s">'inputUsuario'</span> <span class="na">id</span><span class="o">=</span><span class="s">'usuario'</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">"50"</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">'fila'</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span>        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">'password'</span><span class="p">&gt;</span>Contraseña:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos="11 "></span>        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">'password'</span> <span class="na">name</span><span class="o">=</span><span class="s">'inputPassword'</span> <span class="na">id</span><span class="o">=</span><span class="s">'password'</span> <span class="na">maxlength</span><span class="o">=</span><span class="s">"50"</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="13 "></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">'fila'</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span>        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">'submit'</span> <span class="na">name</span><span class="o">=</span><span class="s">'enviar'</span> <span class="na">value</span><span class="o">=</span><span class="s">'Enviar'</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="15 "></span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span>  <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="17 "></span>  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
<p>Al hacer <em>submit</em> nos lleva a <code>login.php</code>, el cual hace de controlador:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">// Comprobamos si ya se ha enviado el formulario</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'enviar'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="nv">$usuario</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'inputUsuario'</span><span class="p">];</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'inputPassword'</span><span class="p">];</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="c1">// validamos que recibimos ambos parámetros</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$usuario</span><span class="p">)</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$password</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="nv">$error</span> <span class="o">=</span> <span class="s2">"Debes introducir un usuario y contraseña"</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">include</span> <span class="s2">"index.php"</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$usuario</span> <span class="o">==</span> <span class="s2">"admin"</span> <span class="o">&amp;&amp;</span> <span class="nv">$password</span> <span class="o">==</span> <span class="s2">"admin"</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>            <span class="c1">// almacenamos el usuario en la sesión</span>
<span class="linenos" data-linenos="14 "></span>            <span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos="15 "></span>            <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'usuario'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$usuario</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>            <span class="c1">// cargamos la página principal</span>
<span class="linenos" data-linenos="17 "></span>            <span class="k">include</span> <span class="s2">"main.php"</span><span class="p">;</span>
<span class="linenos" data-linenos="18 "></span>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>            <span class="c1">// Si las credenciales no son válidas, se vuelven a pedir</span>
<span class="linenos" data-linenos="20 "></span>            <span class="nv">$error</span> <span class="o">=</span> <span class="s2">"Usuario o contraseña no válidos!"</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>            <span class="k">include</span> <span class="s2">"index.php"</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="24 "></span><span class="p">}</span>
</code></pre></div>
<p>Dependiendo del usuario que se haya logueado, vamos a ir a una vista o a otra. Por ejemplo, en <code>main.php</code> tendríamos:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>    <span class="c1">// Recuperamos la información de la sesión</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>        <span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="c1">// Y comprobamos que el usuario se haya autentificado</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'usuario'</span><span class="p">]))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>       <span class="k">die</span><span class="p">(</span><span class="s2">"Error - debe &lt;a href='index.php'&gt;identificarse&lt;/a&gt;.&lt;br/&gt;"</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="11 "></span><span class="cp">?&gt;</span>
<span class="linenos" data-linenos="12 "></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos" data-linenos="13 "></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">"es"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="15 "></span>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="17 "></span>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Listado de productos<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="18 "></span><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="19 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="20 "></span>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Bienvenido <span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'usuario'</span><span class="p">]</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="21 "></span>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Pulse <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"logout.php"</span><span class="p">&gt;</span>aquí<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> para salir<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="22 "></span>    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Volver al <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">"main.php"</span><span class="p">&gt;</span>inicio<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="23 "></span>    <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Listado de productos<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="24 "></span>    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="25 "></span>        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Producto 1<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="26 "></span>        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Producto 2<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="27 "></span>        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Producto 3<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="28 "></span>    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="29 "></span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="30 "></span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>Finalmente, necesitamos la opción de cerrar la sesión que colocamos en <code>logout.php</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// Recuperamos la información de la sesión</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="c1">// Y la destruimos</span>
<span class="linenos" data-linenos="6 "></span><span class="nb">session_destroy</span><span class="p">();</span>
<span class="linenos" data-linenos="7 "></span><span class="nb">header</span><span class="p">(</span><span class="s2">"Location: index.php"</span><span class="p">);</span>
<span class="linenos" data-linenos="8 "></span><span class="cp">?&gt;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Autenticación en producción</p>
<p>En la actualidad la autenticación de usuario no se realiza gestionando la sesión direcamente, sino que se realiza mediante algún framekwork que abstrae todo el proceso o la integración de mecanismos de autenticación tipo <em>OAuth</em>, como  estudiaremos en la última unidad mediante <em>Laravel</em>.</p>
</div>
<h2 id="referencias">Referencias<a class="headerlink" href="#referencias" title="Permanent link">¶</a></h2>
<ul>
<li><a href="https://www.php.net/manual/es/features.cookies.php">Cookies en PHP</a></li>
<li><a href="https://www.php.net/manual/es/book.session.php">Manejo de sesiones en PHP</a></li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Darrera actualització">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="27 d’octubre del 2025 16:01:08 UTC">27 d’octubre del 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Creada">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="4 de novembre del 2024 10:13:45 UTC">4 de novembre del 2024</span>
  </span>

    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025 Xavier Sastre - Llicencia CC BY-NC-SA <a href="#__consent">Canvia configuració de les galetes</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            



<h4>Consentiment ús galetes</h4>
<p>Utilitzem galetes per reconèixer les vostres visites, així com mesurar l'eficàcia de la nostra documentació i si els usuaris troben allò que estan buscant. Amb el teu consentiment, ens ajudes a millorar la nostra documentació.</p>
<input class="md-toggle" type="checkbox" id="__settings">
<div class="md-consent__settings">
  <ul class="task-list">
    
    
    
      
    
    
      
        
  
  
    
    
      
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accepta</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Rebutja</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestiona la configuració</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "toc.integrate", "content.tabs.link", "content.tooltips", "content.code.select", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
        <script src="../../assets/meus.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>