<!DOCTYPE html><html lang="ca" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docencia.xaviersastre.cat/Moduls/DWEC/ajax.html">
      
      
      
      
      <link rel="icon" href="../../imatges/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>Comunicación con el servidor - Docencia Xavier</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f2e4d321.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/neoteroi-mkdocs.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-KXJX1CP7QG"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-KXJX1CP7QG",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-KXJX1CP7QG",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#comunicacion-con-el-servidor" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="../../index.html" title="Docencia Xavier" class="md-header__button md-logo" aria-label="Docencia Xavier" data-md-component="logo">
      
  <img src="../../imatges/education_blanc.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docencia Xavier
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Comunicación con el servidor
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="Teal" aria-label="Canviar a mode nit" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode nit" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="Teal" aria-label="Canviar a mode dia" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode dia" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Docencia Xavier" class="md-nav__button md-logo" aria-label="Docencia Xavier" data-md-component="logo">
      
  <img src="../../imatges/education_blanc.png" alt="logo">

    </a>
    Docencia Xavier
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inici
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NC
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            NC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducció i index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UT01 Compliment normatiu
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            UT01 Compliment normatiu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/UT01.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Material teòric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CECNC/presentacions/01 Unitat 1 - Compliment  normatiu_ok/index_HTML.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diapositives unitat
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DWES
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            DWES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1">
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UT01 Arquitectures Web
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            UT01 Arquitectures Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/UT01ArquitecturesWeb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Material teòric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/presentacions/DWESUT01 - Arquitectures i eines/index_HTML.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diapositives unitat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/UT01ArquitecturesWebVideo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vídeo resum de la unitat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/UT01ArquitecturesWebActivitats.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activitats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2">
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    UT02 Llenguatge PHP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UT02 Llenguatge PHP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/UT02PHP.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Material teòric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/UT02PHPVideo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vídeo resum de la unitat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/UT02PHPTest.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test autoavaluació
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DWES/exercicisisolucions/UT02PHPExercicis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activitats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bloc  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.59 3.41 7 4.82 3.82 8 7 11.18 5.59 12.6 1 8l4.59-4.59m5.82 0L16 8l-4.59 4.6L10 11.18 13.18 8 10 4.82l1.41-1.41M22 6v12c0 1.11-.89 2-2 2H4a2 2 0 0 1-2-2v-4h2v4h16V6h-2.97V4H20c1.11 0 2 .89 2 2Z"></path></svg>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2">
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Arxiva
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Arxiva
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2025.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2024.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3">
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/aws.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/amazon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/coneixements-generals.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coneixements generals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dam.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/daw.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DAW
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dwec.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DWEC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dwes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DWES
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/docker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/dynamodb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DynamoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/general.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/html.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/js.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/java.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/javascript.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Javascript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/matem%C3%A0tiques.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matemàtiques
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/php.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/psp.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PSP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/programaci%C3%B3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programació
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/programci%C3%B3-multifil.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Programció multifil
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/projecte-intermodular.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Projecte intermodular
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/springboot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringBoot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="comunicacion-con-el-servidor">Comunicación con el servidor<a class="headerlink" href="#comunicacion-con-el-servidor" title="Permanent link">¶</a></h1>
<h2 id="ajax-en-javascript">AJAX en JavaScript<a class="headerlink" href="#ajax-en-javascript" title="Permanent link">¶</a></h2>
<p><strong>Lectura recomendada:</strong> https://developer.mozilla.org/es/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data</p>
<p>AJAX, acrónimo de "Asynchronous JavaScript and XML", es un conjunto de tecnologías que permite a las aplicaciones web enviar y recibir datos del servidor de manera asíncrona, sin necesidad de recargar la página completa. Esto mejora significativamente el rendimiento y la experiencia del usuario. No obstante tiene unos inconvenientes que también hay que mencionar. De esta manera, originalmente, AJAX se compone de: </p>
<ol>
<li><strong>JavaScript</strong>: El lenguaje de programación que controla la interacción y el comportamiento dinámico de la página web.</li>
<li><strong>XHTML y CSS</strong>: Utilizados para estructurar y estilizar la página web.</li>
<li><strong>XML o JSON</strong>: Formatos de datos que se envían y reciben desde el servidor.</li>
<li><strong>XMLHttpRequest</strong>: El objeto que permite a JavaScript realizar solicitudes HTTP de manera asíncrona.</li>
</ol>
<blockquote>
<p>Esta es la definición original de AJAX, no obstante, aunque se puede mantener el nombre a la metodología, algunas tecnologías han mejorado. Ahora, en general, se usa <code>JSON</code> y en vez de <code>XMLHttpRequest</code> se usa <code>fetch</code>. </p>
</blockquote>
<p>Con AJAX, JavaScript puede enviar o solicitar datos en formato XML o JSON al servidor sin recargar la página. El servidor responde a estas solicitudes, generalmente a través de una API REST o similar. El cliente, usando JavaScript, procesa la respuesta y actualiza el contenido de la página dinámicamente.</p>
<h3 id="ejemplo-basico-de-ajax">Ejemplo Básico de AJAX<a class="headerlink" href="#ejemplo-basico-de-ajax" title="Permanent link">¶</a></h3>
<h4 id="enviar-una-solicitud-ajax-con-xmlhttprequest">Enviar una solicitud AJAX con <code>XMLHttpRequest</code><a class="headerlink" href="#enviar-una-solicitud-ajax-con-xmlhttprequest" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>AJAX Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">"loadData"</span><span class="p">&gt;</span>Load Data<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"result"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'loadData'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="12 "></span><span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="linenos" data-linenos="13 "></span><span class="w">            </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="s1">'https://api.example.com/data'</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span><span class="w">            </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="16 "></span><span class="w">                    </span><span class="kd">var</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
<span class="linenos" data-linenos="17 "></span><span class="w">                    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'result'</span><span class="p">).</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
<span class="linenos" data-linenos="18 "></span><span class="w">                </span><span class="p">}</span>
<span class="linenos" data-linenos="19 "></span><span class="w">            </span><span class="p">};</span>
<span class="linenos" data-linenos="20 "></span><span class="w">            </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="linenos" data-linenos="21 "></span><span class="w">        </span><span class="p">});</span>
<span class="linenos" data-linenos="22 "></span><span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="23 "></span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="24 "></span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>En este ejemplo, cuando se hace clic en el botón "Load Data", se envía una solicitud <code>GET</code> al servidor. La respuesta, que se espera esté en formato JSON, se procesa y se muestra en el <code>div</code> con el ID "result".</p>
<blockquote>
<p>Este ejemplo se puede considerar anticuado, a partir de ES6 es mejor hacerlo con fetch y promesas. No obstante, es interesante analizar este código y entender cómo funciona. Además, fetch no permite un control a tan bajo nivel de todas las etapas de una petición, por lo que sigue siendo necesario para hacer barras de progreso, cancelar peticiones... </p>
</blockquote>
<h3 id="beneficios-de-ajax">Beneficios de AJAX<a class="headerlink" href="#beneficios-de-ajax" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Mejora del Rendimiento</strong>: Al no recargar la página completa, solo se actualizan las partes necesarias, lo que resulta en una experiencia de usuario más rápida y fluida.</li>
<li><strong>Experiencia de Usuario Mejorada</strong>: Las actualizaciones dinámicas permiten una interacción más rápida y eficiente.</li>
</ul>
<h3 id="problemas-de-ajax">Problemas de AJAX<a class="headerlink" href="#problemas-de-ajax" title="Permanent link">¶</a></h3>
<ul>
<li><strong>SEO</strong>: Las páginas que utilizan AJAX pueden ser más difíciles de indexar por los motores de búsqueda, ya que gran parte del contenido se carga de manera dinámica.</li>
<li><strong>Complejidad en el Desarrollo</strong>: El desarrollo de aplicaciones AJAX puede ser más complicado debido a la necesidad de manejar las solicitudes asíncronas y actualizar el DOM dinámicamente.</li>
</ul>
<h3 id="apis">APIs<a class="headerlink" href="#apis" title="Permanent link">¶</a></h3>
<p>La comunicación entre el cliente y el servidor en una aplicación web puede llevarse a cabo de varias maneras. Dos enfoques comunes incluyen:</p>
<ol>
<li><strong>Solicitudes de HTML:</strong> JavaScript puede solicitar un HTML estático o dinámico y luego insertar el resultado en la página.</li>
<li><strong>Interacción con APIs:</strong> JavaScript puede enviar y recibir datos en formato XML o JSON a través de una API.</li>
</ol>
<p>Las APIs (Interfaz de Programación de Aplicaciones) permiten que diferentes software se comuniquen entre sí. Existen varios tipos de APIs, cada una con sus propias características y casos de uso:</p>
<h4 id="tipos-de-apis">Tipos de APIs<a class="headerlink" href="#tipos-de-apis" title="Permanent link">¶</a></h4>
<ol>
<li>
<p><strong>SOAP (Simple Object Access Protocol):</strong> 
   - Es un protocolo basado en XML.
   - Conocido por su complejidad y sobrecarga debido a la utilización de XML.
   - No está optimizado para HTTP.</p>
</li>
<li>
<p><strong>REST (Representational State Transfer):</strong>
   - Basado en HTTP y utiliza URLs.
   - Aprovecha los verbos HTTP (GET, POST, PUT, DELETE, PATCH).
   - Es popular por su simplicidad y eficiencia.</p>
</li>
<li>
<p><strong>GraphQL:</strong>
   - Permite consultas más granulares y controladas.
   - Envía un JSON con la consulta en la URL.
   - Independiente del protocolo HTTP.
   - Utiliza un lenguaje de definición de esquemas (IDL).</p>
</li>
<li>
<p><strong>gRPC (gRPC Remote Procedure Calls):</strong>
   - Utiliza HTTP/2, permitiendo una comunicación más eficiente.
   - Ofrece soporte para múltiples lenguajes de programación.</p>
</li>
</ol>
<h5 id="api-rest">API REST<a class="headerlink" href="#api-rest" title="Permanent link">¶</a></h5>
<p>Las APIs REST utilizan las peticiones HTTP como verbos del protocolo:</p>
<ul>
<li><strong>GET:</strong> Recuperar recursos.</li>
<li><strong>POST:</strong> Crear nuevos recursos.</li>
<li><strong>PUT:</strong> Actualizar recursos existentes.</li>
<li><strong>DELETE:</strong> Eliminar recursos.</li>
<li><strong>PATCH:</strong> Actualizar parcialmente recursos.</li>
</ul>
<p><strong>Características de las APIs REST:</strong></p>
<ul>
<li>Utilizan rutas URL para identificar los recursos.</li>
<li>Los códigos de respuesta HTTP indican el estado de la solicitud (por ejemplo, 200 para éxito, 404 para no encontrado, 500 para error del servidor).</li>
<li>Los datos (payload) pueden enviarse en XML o JSON.</li>
<li>Una API que sigue estrictamente las características REST se denomina RESTful.</li>
</ul>
<p><strong>Ejemplo de API REST:</strong></p>
<p>Supongamos una API para gestionar una colección de libros:</p>
<ul>
<li><code>GET /books</code>: Recupera la lista de libros.</li>
<li><code>POST /books</code>: Crea un nuevo libro.</li>
<li><code>GET /books/:id</code>: Recupera un libro específico.</li>
<li><code>PUT /books/:id</code>: Actualiza un libro específico.</li>
<li><code>DELETE /books/:id</code>: Elimina un libro específico.</li>
</ul>
<h5 id="api-graphql">API GraphQL<a class="headerlink" href="#api-graphql" title="Permanent link">¶</a></h5>
<p>GraphQL es una alternativa a REST que permite realizar consultas más precisas y específicas. En lugar de varias URLs, una sola URL acepta consultas en JSON.</p>
<p><strong>Características de las APIs GraphQL:</strong></p>
<ul>
<li>Permiten más control y granularidad en las consultas.</li>
<li>Las peticiones son fáciles de entender y leer para los humanos.</li>
<li>No están limitadas a HTTP.</li>
<li>Utilizan el IDL (Schema Definition Language) para definir el esquema.</li>
</ul>
<p><strong>Ejemplo de API GraphQL:</strong></p>
<p>Consulta para obtener el título y autor de un libro específico:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">  </span><span class="n">book</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s">"1"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="n">title</span>
<span class="linenos" data-linenos="4 "></span><span class="w">    </span><span class="n">author</span>
<span class="linenos" data-linenos="5 "></span><span class="w">  </span><span class="p">}</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
</code></pre></div>
<h5 id="sdks-kits-de-desarrollo-de-software">SDKs (Kits de Desarrollo de Software)<a class="headerlink" href="#sdks-kits-de-desarrollo-de-software" title="Permanent link">¶</a></h5>
<p>Las APIs pueden ser complejas, y herramientas como Firebase, MongoDB Realm, y Supabase ofrecen SDKs que simplifican tareas comunes como la autenticación de usuarios y las consultas avanzadas.</p>
<p><strong>Características de los SDKs:</strong></p>
<ul>
<li>Facilitan la interacción con las APIs al proporcionar bibliotecas preconstruidas.</li>
<li>Ahorra tiempo en la programación de la comunicación entre el cliente y el servidor.</li>
<li>No son estándar y dependen del proveedor del servicio.</li>
</ul>
<blockquote>
<p><strong>Nota:</strong> Aunque los SDKs pueden simplificar mucho el trabajo, en este curso evitaremos su uso para centrarnos en aprender los fundamentos de las APIs.</p>
</blockquote>
<h3 id="webs-spa-single-page-application">Webs SPA (Single Page Application)<a class="headerlink" href="#webs-spa-single-page-application" title="Permanent link">¶</a></h3>
<p>Las aplicaciones de una sola página (SPA) utilizan AJAX para cargar y actualizar contenido sin necesidad de recargar la página completa. Esto permite crear aplicaciones web más rápidas y con una experiencia de usuario similar a las aplicaciones de escritorio.</p>
<h4 id="ejemplo-de-spa-con-ajax">Ejemplo de SPA con AJAX<a class="headerlink" href="#ejemplo-de-spa-con-ajax" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>SPA Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">        </span><span class="p">.</span><span class="nc">hidden</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="11 "></span>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"loadPage('home')"</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="12 "></span>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"loadPage('about')"</span><span class="p">&gt;</span>About<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="13 "></span>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">"loadPage('contact')"</span><span class="p">&gt;</span>Contact<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span>    <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="15 "></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"content"</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span>    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="18 "></span><span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">loadPage</span><span class="p">(</span><span class="nx">page</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="19 "></span><span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">xhr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="linenos" data-linenos="20 "></span><span class="w">            </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="nx">page</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'.html'</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
<span class="linenos" data-linenos="21 "></span><span class="w">            </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="22 "></span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="23 "></span><span class="w">                    </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'content'</span><span class="p">).</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
<span class="linenos" data-linenos="24 "></span><span class="w">                </span><span class="p">}</span>
<span class="linenos" data-linenos="25 "></span><span class="w">            </span><span class="p">};</span>
<span class="linenos" data-linenos="26 "></span><span class="w">            </span><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
<span class="linenos" data-linenos="27 "></span><span class="w">        </span><span class="p">}</span>
<span class="linenos" data-linenos="28 "></span><span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="29 "></span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="30 "></span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>En este ejemplo, cada botón en la navegación carga contenido diferente en el <code>div</code> con el ID "content" utilizando AJAX. Esto permite que la página se actualice dinámicamente sin necesidad de recargarla por completo.</p>
<h3 id="xmlhttprequest-en-javascript">XMLHttpRequest en JavaScript<a class="headerlink" href="#xmlhttprequest-en-javascript" title="Permanent link">¶</a></h3>
<p>XMLHttpRequest (XHR) es una API utilizada para enviar y recibir datos entre un cliente web y un servidor. A pesar de su nombre, XMLHttpRequest puede manejar diferentes tipos de datos, aunque en este capítulo nos centraremos principalmente en JSON debido a su popularidad en las aplicaciones web modernas.</p>
<h4 id="inicializacion-y-uso-basico">Inicialización y Uso Básico<a class="headerlink" href="#inicializacion-y-uso-basico" title="Permanent link">¶</a></h4>
<p>Para comenzar a utilizar XMLHttpRequest, primero debemos crear una instancia del objeto <code>XMLHttpRequest</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">var</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</code></pre></div>
<p>Una vez creado el objeto, debemos configurar la solicitud utilizando el método <code>open</code>. Este método tiene tres parámetros principales:
1. <strong>Método HTTP</strong>: El método de la solicitud, como 'GET' o 'POST'.
2. <strong>URL</strong>: La URL a la que se envía la solicitud.
3. <strong>Asíncrono</strong>: Un valor booleano que indica si la solicitud debe ser asíncrona (<code>true</code>) o síncrona (<code>false</code>). En la mayoría de los casos, queremos que sea asíncrona para no bloquear la ejecución del script.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="s1">'http://www.mozilla.org/'</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p>XMLHttpRequest tiene un conjunto de estados que indican el progreso de la solicitud. Estos estados están representados por la propiedad <code>readyState</code> del objeto XHR. Los posibles valores de <code>readyState</code> son:
- <code>0</code> (UNSENT): La solicitud no ha sido inicializada.
- <code>1</code> (OPENED): Se ha establecido la conexión con el servidor.
- <code>2</code> (HEADERS_RECEIVED): Se han recibido los encabezados de la respuesta.
- <code>3</code> (LOADING): El cuerpo de la respuesta se está recibiendo.
- <code>4</code> (DONE): La solicitud se ha completado y la respuesta está lista.</p>
<p>Para realizar alguna acción cuando la solicitud cambie de estado, se utiliza la propiedad <code>onreadystatechange</code>, que se asigna a una función. Esta función se ejecutará cada vez que cambie el estado de la solicitud.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">aEvt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="4 "></span><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="6 "></span><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error loading page\n"</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span><span class="w">    </span><span class="p">}</span>
<span class="linenos" data-linenos="8 "></span><span class="w">  </span><span class="p">}</span>
<span class="linenos" data-linenos="9 "></span><span class="p">};</span>
</code></pre></div>
<p>Finalmente, enviamos la solicitud al servidor utilizando el método <code>send</code>. Si estamos enviando datos (por ejemplo, en una solicitud <code>POST</code>), estos se pasan como argumento a <code>send</code>. En una solicitud <code>GET</code>, simplemente pasamos <code>null</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre></div>
<h4 id="ejemplo-completo">Ejemplo Completo<a class="headerlink" href="#ejemplo-completo" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kd">var</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="s1">'http://www.mozilla.org/'</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
<span class="linenos" data-linenos=" 3 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">aEvt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error loading page\n"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">    </span><span class="p">}</span>
<span class="linenos" data-linenos="10 "></span><span class="w">  </span><span class="p">}</span>
<span class="linenos" data-linenos="11 "></span><span class="p">};</span>
<span class="linenos" data-linenos="12 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre></div>
<ol>
<li>
<p><strong>Crear el Objeto XHR</strong>:
   </p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">var</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
</code></pre></div>
   Aquí se crea una nueva instancia del objeto <code>XMLHttpRequest</code>.<p></p>
</li>
<li>
<p><strong>Configurar la Solicitud</strong>:
   </p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="w"> </span><span class="s1">'http://www.mozilla.org/'</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span>
</code></pre></div>
   Se configura la solicitud para hacer una petición <code>GET</code> a la URL especificada. El tercer parámetro, <code>true</code>, indica que la solicitud debe ser asíncrona.<p></p>
</li>
<li>
<p><strong>Monitorear Cambios de Estado</strong>:
   </p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">onreadystatechange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">aEvt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">readyState</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="4 "></span><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="6 "></span><span class="w">      </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error loading page\n"</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span><span class="w">    </span><span class="p">}</span>
<span class="linenos" data-linenos="8 "></span><span class="w">  </span><span class="p">}</span>
<span class="linenos" data-linenos="9 "></span><span class="p">};</span>
</code></pre></div>
   Se define una función que se ejecuta cada vez que cambia el estado de la solicitud. Cuando <code>readyState</code> es <code>4</code>, significa que la solicitud se ha completado. Si <code>status</code> es <code>200</code>, significa que la solicitud fue exitosa y se imprime la respuesta en la consola. Si el estado es diferente, se imprime un mensaje de error.<p></p>
</li>
<li>
<p><strong>Enviar la Solicitud</strong>:
   </p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre></div>
   Finalmente, se envía la solicitud al servidor.<p></p>
</li>
</ol>
<blockquote>
<p>Este capítulo ha cubierto los conceptos básicos y la implementación de XMLHttpRequest. En capítulos posteriores, exploraremos métodos modernos como <code>fetch</code> y la forma en que se integran con las características más recientes de JavaScript, como las promesas y la sintaxis <code>async/await</code>.</p>
</blockquote>
<h2 id="fetch">Fetch<a class="headerlink" href="#fetch" title="Permanent link">¶</a></h2>
<p>La función <code>fetch</code> de JavaScript proporciona una manera sencilla y poderosa de realizar solicitudes HTTP. Es similar a <code>XMLHttpRequest</code> (XHR), pero utiliza promesas y tiene una sintaxis más moderna y limpia.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">(()=&gt;{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://127.0.0.1:5500/datos.json'</span><span class="p">)</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w"> </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">   </span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">     </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Looks like there was a problem. Status Code: '</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">       </span><span class="k">return</span><span class="p">;</span><span class="w">     </span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">     </span><span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">     </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="w">     </span><span class="p">});</span>
<span class="linenos" data-linenos="12 "></span><span class="w">   </span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="w"> </span><span class="p">)</span>
<span class="linenos" data-linenos="14 "></span><span class="w"> </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Fetch Error : '</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">);</span>
<span class="linenos" data-linenos="16 "></span><span class="w"> </span><span class="p">});</span>
<span class="linenos" data-linenos="17 "></span><span class="p">})();</span>
</code></pre></div>
<p>En este ejemplo, <code>fetch</code> solicita un archivo JSON. Si la respuesta tiene un estado diferente de 200 (OK), se imprime un mensaje de error. Si la respuesta es correcta, se convierte a JSON y se imprime.</p>
<h3 id="objeto-response">Objeto Response<a class="headerlink" href="#objeto-response" title="Permanent link">¶</a></h3>
<p>Si la solicitud tiene éxito, <code>fetch</code> devuelve un objeto <code>Response</code>, que es un flujo (stream) con varias propiedades y métodos útiles.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">(()=&gt;{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://github.com/'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">));</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'Date'</span><span class="p">));</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="kr">type</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">});</span>
<span class="linenos" data-linenos="10 "></span><span class="p">})();</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>Fetch Error :  TypeError: error sending request for url (http://127.0.0.1:5500/datos.json): error trying to connect: tcp connect error: Connection refused (os error 111)
<span class="linenos" data-linenos="2 "></span>    at async mainFetch (ext:deno_fetch/26_fetch.js:170:12)
<span class="linenos" data-linenos="3 "></span>    at async fetch (ext:deno_fetch/26_fetch.js:391:7)
</code></pre></div>
<p>Este ejemplo muestra cómo acceder a diferentes propiedades del objeto <code>Response</code>, como los encabezados y el estado de la solicitud.</p>
<h4 id="guardar-los-datos">Guardar los Datos<a class="headerlink" href="#guardar-los-datos" title="Permanent link">¶</a></h4>
<p><code>fetch</code> permite obtener el texto o un objeto de la respuesta. Las funciones <code>response.json()</code> y <code>response.text()</code> devuelven promesas que se resuelven con el contenido adecuado. No es posible usar ambas funciones en una misma petición.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">(()=&gt;{</span>
<span class="linenos" data-linenos="2 "></span><span class="nx">fetch</span><span class="p">(</span><span class="s2">"https://dwec-daw-default-rtdb.firebaseio.com/productos.json"</span><span class="p">)</span>
<span class="linenos" data-linenos="3 "></span><span class="w">       </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="linenos" data-linenos="4 "></span><span class="w">       </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="nx">fetch</span><span class="p">(</span><span class="s2">"https://dwec-daw-default-rtdb.firebaseio.com/productos.json"</span><span class="p">)</span>
<span class="linenos" data-linenos="7 "></span><span class="w">       </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
<span class="linenos" data-linenos="8 "></span><span class="w">       </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="linenos" data-linenos="9 "></span><span class="p">})();</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>https://github.com/
</code></pre></div>
<p>En estos ejemplos, se hace una solicitud a una URL y se procesan los datos como JSON en el primer caso y como texto en el segundo.</p>
<h3 id="encadenar-promesas">Encadenar Promesas<a class="headerlink" href="#encadenar-promesas" title="Permanent link">¶</a></h3>
<p>Es posible encadenar promesas para manejar el flujo de la solicitud de manera más estructurada.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">(()=&gt;{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kd">function</span><span class="w"> </span><span class="nx">showStatus</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">200</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">300</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="p">));</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">   </span><span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="kd">function</span><span class="w"> </span><span class="nx">json</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="linenos" data-linenos="11 "></span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span><span class="w">  </span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'datos.json'</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span><span class="w">   </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">showStatus</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span><span class="w">   </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="p">)</span>
<span class="linenos" data-linenos="17 "></span><span class="w">   </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="18 "></span><span class="w">     </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request succeeded with JSON response'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="linenos" data-linenos="19 "></span><span class="w">   </span><span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="20 "></span><span class="w">     </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request failed: '</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="linenos" data-linenos="21 "></span><span class="w">   </span><span class="p">});</span>
<span class="linenos" data-linenos="22 "></span><span class="w">  </span><span class="p">})();</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>{
<span class="linenos" data-linenos="2 "></span>  "error" : "Permission denied"
<span class="linenos" data-linenos="3 "></span>}
</code></pre></div>
<p>En este ejemplo, la función <code>status</code> verifica si la respuesta es correcta, y la función <code>json</code> convierte la respuesta en un objeto JSON. Luego, se manejan los datos o se capturan errores según corresponda.</p>
<h3 id="enviar-datos-con-fetch">Enviar Datos con Fetch<a class="headerlink" href="#enviar-datos-con-fetch" title="Permanent link">¶</a></h3>
<h4 id="usar-el-metodo-post">Usar el método POST<a class="headerlink" href="#usar-el-metodo-post" title="Permanent link">¶</a></h4>
<p>Para enviar datos a un servidor, se puede usar el método <code>POST</code> con <code>fetch</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">       </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'post'</span><span class="p">,</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">       </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">         </span><span class="s2">"Content-type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"application/x-www-form-urlencoded; charset=UTF-8"</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">       </span><span class="p">},</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">       </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="s1">'foo=bar&amp;lorem=ipsum'</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">     </span><span class="p">})</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">     </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">     </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request succeeded with JSON response'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="w">     </span><span class="p">})</span>
<span class="linenos" data-linenos="12 "></span><span class="w">     </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="13 "></span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request failed'</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span><span class="w">     </span><span class="p">});</span>
</code></pre></div>
<p>En este ejemplo, se envían datos codificados en la URL (formato de formulario) al servidor.</p>
<h4 id="enviar-json">Enviar JSON<a class="headerlink" href="#enviar-json" title="Permanent link">¶</a></h4>
<p>Para enviar datos en formato JSON, se debe configurar el encabezado <code>Content-Type</code> y convertir el objeto de datos a JSON.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">datos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="s1">'example'</span><span class="p">};</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">       </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'post'</span><span class="p">,</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">       </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">         </span><span class="s2">"Content-type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"application/json; charset=UTF-8"</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">       </span><span class="p">},</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">       </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">datos</span><span class="p">)</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">     </span><span class="p">})</span>
<span class="linenos" data-linenos="10 "></span><span class="w">     </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="linenos" data-linenos="11 "></span><span class="w">     </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="12 "></span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request succeeded with JSON response'</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="w">     </span><span class="p">})</span>
<span class="linenos" data-linenos="14 "></span><span class="w">     </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span><span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Request failed'</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="linenos" data-linenos="16 "></span><span class="w">     </span><span class="p">});</span>
</code></pre></div>
<p>En este ejemplo, un objeto JavaScript se convierte a JSON y se envía al servidor.</p>
<h3 id="uso-de-formdata">Uso de FormData<a class="headerlink" href="#uso-de-formdata" title="Permanent link">¶</a></h3>
<p><code>FormData</code> es un objeto predefinido en JavaScript que se utiliza para crear pares clave-valor para enviar formularios mediante <code>XMLHttpRequest</code> o <code>fetch</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">formElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"myFormElement"</span><span class="p">);</span><span class="w"> </span><span class="c1">// Un formulario HTML</span>
<span class="linenos" data-linenos="2 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">(</span><span class="nx">formElement</span><span class="p">);</span><span class="w"> </span><span class="c1">// Constructor de FormData con un formulario</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"serialnumber"</span><span class="p">,</span><span class="w"> </span><span class="nx">serialNumber</span><span class="o">++</span><span class="p">);</span><span class="w"> </span><span class="c1">// Añadir más datos</span>
<span class="linenos" data-linenos="5 "></span><span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">"afile"</span><span class="p">,</span><span class="w"> </span><span class="nx">fileInputElement</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span><span class="w"> </span><span class="c1">// Añadir un archivo</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:3000/upload'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="p">});</span>
</code></pre></div>
<p>Este ejemplo muestra cómo crear un objeto <code>FormData</code> a partir de un formulario HTML y enviar datos adicionales, incluyendo un archivo, al servidor.</p>
<h4 id="convertir-formdata-a-json">Convertir FormData a JSON<a class="headerlink" href="#convertir-formdata-a-json" title="Permanent link">¶</a></h4>
<p>Para enviar <code>FormData</code> como JSON, se puede convertir a un objeto JavaScript y luego a una cadena JSON.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">(</span><span class="nx">form</span><span class="p">);</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">return</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">   </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">   </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">       </span><span class="s2">"Content-type"</span><span class="o">:</span><span class="w"> </span><span class="s2">"application/json; charset=UTF-8"</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">   </span><span class="p">},</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">   </span><span class="nx">body</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
</code></pre></div>
<p>En este ejemplo, se convierte <code>FormData</code> en un objeto JSON antes de enviarlo.</p>
<h3 id="cargar-imagenes-en-segundo-plano">Cargar Imágenes en Segundo Plano<a class="headerlink" href="#cargar-imagenes-en-segundo-plano" title="Permanent link">¶</a></h3>
<p>Es posible cargar imágenes en segundo plano utilizando <code>fetch</code> y el método <code>blob</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="o">&lt;</span><span class="nx">img</span><span class="w"> </span><span class="nx">src</span><span class="o">=</span><span class="s2">"placeholder.png"</span><span class="w"> </span><span class="nx">alt</span><span class="o">=</span><span class="s2">"${name}"</span><span class="o">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="nx">fetch</span><span class="p">(</span><span class="nx">image_url</span><span class="p">)</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">200</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">))</span>
<span class="linenos" data-linenos=" 5 "></span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">blob</span><span class="p">())</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">imageBlob</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="nx">imageURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">imageBlob</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">   </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'img'</span><span class="p">).</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">imageURL</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">})</span>
<span class="linenos" data-linenos="10 "></span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
</code></pre></div>
<p>Este ejemplo muestra cómo cargar una imagen en segundo plano y actualizar la fuente de una etiqueta <code>&lt;img&gt;</code> con la URL del <code>blob</code> de la imagen.</p>
<p>La función URL.createObjectURL(blob) es un método del API de URL en JavaScript que permite crear una URL temporal, de tipo "blob", que representa un objeto de datos (Blob o File) en el navegador. Esta URL puede ser utilizada para acceder y manipular el contenido del objeto de datos como si fuera un archivo disponible en una URL normal. </p>
<p><code>URL.createObjectURL(blob)</code> crea una URL única que representa el objeto <code>Blob</code> (o <code>File</code>). Esta URL es válida mientras el documento que la creó esté en memoria, y se puede usar como referencia al contenido del objeto de datos. La URL generada permite acceder y manipular el contenido del <code>Blob</code> como si fuera un archivo remoto. La URL no requiere que los datos sean enviados a un servidor; todo se maneja localmente en el navegador. La URL generada puede ser asignada a elementos HTML, como <code>&lt;img&gt;</code>, <code>&lt;video&gt;</code>, <code>&lt;audio&gt;</code>, o cualquier otro elemento que acepte una URL de recursos. También se puede usar para descargar archivos, mostrar previsualizaciones, o procesar datos de archivos de manera local.</p>
<p>Las URLs creadas con <code>URL.createObjectURL(blob)</code> ocupan recursos en el navegador. Para liberar estos recursos cuando ya no se necesite la URL, se debe llamar a <code>URL.revokeObjectURL(url)</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">const</span><span class="w"> </span><span class="nx">objectURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// Usar la URL...</span>
<span class="linenos" data-linenos="3 "></span><span class="nx">URL</span><span class="p">.</span><span class="nx">revokeObjectURL</span><span class="p">(</span><span class="nx">objectURL</span><span class="p">);</span><span class="w"> </span><span class="c1">// Liberar la URL cuando ya no sea necesaria</span>
</code></pre></div>
<h3 id="construccion-de-urls">Construcción de URLs<a class="headerlink" href="#construccion-de-urls" title="Permanent link">¶</a></h3>
<p><code>fetch</code> puede utilizar URLs construidas dinámicamente. Esto es útil cuando los parámetros de la consulta cambian en tiempo de ejecución.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`Saint Vincent &amp; the Grenadines`</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="nx">fetch</span><span class="p">(</span><span class="sb">`/api/cities?country=</span><span class="si">${</span><span class="nx">country</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">//"/api/cities?country=Saint Vincent &amp; the Grenadines"</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`/api/cities?</span><span class="si">${</span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">([[</span><span class="s1">'country'</span><span class="p">,</span><span class="w"> </span><span class="nx">country</span><span class="p">]])</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span>
<span class="linenos" data-linenos="8 "></span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
<span class="linenos" data-linenos="9 "></span><span class="c1">//"/api/cities?country=Saint+Vincent+%26+the+Grenadines"</span>
</code></pre></div>
<p>En este ejemplo, se construye una URL con parámetros de consulta utilizando <code>URLSearchParams</code>, asegurándose de que los caracteres especiales estén correctamente codificados.</p>
<p>Si usamos el constructor con una URL ya formada nos retorna un objeto URLSearchParams, que es un iterable con los datos:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URL</span><span class="p">(</span><span class="s2">"http://example.com/search?query=%40"</span><span class="p">);</span>
<span class="linenos" data-linenos="2 "></span><span class="kd">const</span><span class="w"> </span><span class="nx">searchParams3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">search</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">searchParams3</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="s2">"query"</span><span class="p">));</span><span class="w"> </span><span class="c1">// true</span>
</code></pre></div>
<h2 id="websockets">WebSockets<a class="headerlink" href="#websockets" title="Permanent link">¶</a></h2>
<p>WebSocket es una tecnología que proporciona un canal de comunicación full-duplex sobre un único socket TCP. Es decir, permite establecer una conexión persistente entre el cliente y el servidor, donde ambos pueden enviar y recibir datos en tiempo real. Esto es especialmente útil para aplicaciones que requieren comunicación bidireccional constante, como chats en línea, notificaciones en tiempo real, y juegos multijugador.</p>
<p>A continuación, analizamos un ejemplo de uso de WebSocket en JavaScript.</p>
<h3 id="establecer-una-conexion-websocket">Establecer una Conexión WebSocket<a class="headerlink" href="#establecer-una-conexion-websocket" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">WebSocket</span><span class="p">(</span><span class="s2">"ws://localhost:8080"</span><span class="p">);</span>
</code></pre></div>
<p>Esta línea crea una nueva instancia de WebSocket, abriendo una conexión a la URL proporcionada. En este caso, la URL es <code>"ws://localhost:8080"</code>, lo que indica que se está intentando conectar a un servidor WebSocket que está ejecutándose en <code>localhost</code> en el puerto <code>8080</code>.</p>
<h3 id="manejadores-de-eventos">Manejadores de Eventos<a class="headerlink" href="#manejadores-de-eventos" title="Permanent link">¶</a></h3>
<h4 id="evento-open">Evento <code>open</code><a class="headerlink" href="#evento-open" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">socket</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"open"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Conexión establecida."</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="w">   </span><span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">"¡Hola, servidor!"</span><span class="p">);</span>
<span class="linenos" data-linenos="4 "></span><span class="p">});</span>
</code></pre></div>
<p>El evento <code>open</code> se dispara cuando la conexión WebSocket se ha establecido con éxito. En este manejador, se imprime un mensaje en la consola indicando que la conexión se ha establecido, y se envía un mensaje al servidor utilizando <code>socket.send("¡Hola, servidor!");</code>.</p>
<h4 id="evento-message">Evento <code>message</code><a class="headerlink" href="#evento-message" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">socket</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"message"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Mensaje recibido del servidor: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="p">});</span>
</code></pre></div>
<p>El evento <code>message</code> se dispara cada vez que el cliente recibe datos del servidor. El objeto <code>event</code> contiene la propiedad <code>data</code>, que almacena los datos recibidos. En este manejador, los datos recibidos se imprimen en la consola.</p>
<h4 id="evento-error">Evento <code>error</code><a class="headerlink" href="#evento-error" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">socket</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"error"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error en la conexión: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">error</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="p">});</span>
</code></pre></div>
<p>El evento <code>error</code> se dispara cuando ocurre un error en la comunicación WebSocket. En este manejador, el error se imprime en la consola.</p>
<h4 id="evento-close">Evento <code>close</code><a class="headerlink" href="#evento-close" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nx">socket</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"close"</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">   </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Conexión cerrada. Código: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="p">});</span>
</code></pre></div>
<p>El evento <code>close</code> se dispara cuando la conexión WebSocket se cierra. El objeto <code>event</code> contiene una propiedad <code>code</code>, que indica el código de cierre de la conexión. En este manejador, se imprime un mensaje en la consola indicando que la conexión se ha cerrado y mostrando el código de cierre.</p>
<h2 id="tratamiento-de-los-datos">Tratamiento de los Datos<a class="headerlink" href="#tratamiento-de-los-datos" title="Permanent link">¶</a></h2>
<p>En las aplicaciones web modernas, es común recibir datos del servidor en formato JSON, que es un formato ligero para el intercambio de datos. JavaScript proporciona herramientas potentes para trabajar con JSON, permitiendo convertir objetos en JSON y viceversa. Además, también es importante poder almacenar datos en el lado del cliente para mejorar la experiencia del usuario. En este capítulo, exploraremos cómo convertir objetos a JSON y cómo trabajar con almacenamiento en el lado del cliente, incluyendo cookies y LocalStorage.</p>
<h3 id="convertir-objetos-a-json">Convertir Objetos a JSON<a class="headerlink" href="#convertir-objetos-a-json" title="Permanent link">¶</a></h3>
<p>JavaScript permite convertir objetos en cadenas JSON utilizando el método <code>JSON.stringify</code>. Este método es útil cuando necesitamos enviar datos al servidor o almacenarlos en el lado del cliente.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">(()=&gt;{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kd">class</span><span class="w"> </span><span class="nx">Apple</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="kr">type</span><span class="p">){</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">     </span><span class="k">this</span><span class="p">.</span><span class="kr">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">type</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">     </span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">  </span><span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span><span class="kd">let</span><span class="w">  </span><span class="nx">apple1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Apple</span><span class="p">(</span><span class="s1">'Golden'</span><span class="p">);</span><span class="w"> </span><span class="c1">// Se crea una instancia</span>
<span class="linenos" data-linenos=" 9 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">appleJson</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">apple1</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">appleJson</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="p">})();</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>{"type":"Golden","color":"red"}
</code></pre></div>
<p>En este ejemplo:
1. <strong>Definimos una clase <code>Apple</code></strong> que tiene un constructor que inicializa el tipo y el color de la manzana.
2. <strong>Creamos una instancia</strong> de <code>Apple</code> con el tipo 'Golden'.
3. <strong>Convertimos la instancia en una cadena JSON</strong> usando <code>JSON.stringify</code>.
4. <strong>Imprimimos la cadena JSON</strong> resultante en la consola.</p>
<p>El resultado en la consola será: <code>{"type":"Golden","color":"red"}</code>, que es la representación JSON del objeto <code>apple1</code>.</p>
<h3 id="convertir-json-a-objetos">Convertir JSON a Objetos<a class="headerlink" href="#convertir-json-a-objetos" title="Permanent link">¶</a></h3>
<p>Para convertir una cadena JSON en un objeto de JavaScript, utilizamos el método <code>JSON.parse</code>. Esto es útil cuando recibimos datos del servidor en formato JSON y necesitamos trabajar con ellos en nuestro código.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">(()=&gt;{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kd">class</span><span class="w"> </span><span class="nx">Hero</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">car</span><span class="p">){</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">     </span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">name</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">     </span><span class="k">this</span><span class="p">.</span><span class="nx">car</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">car</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">  </span><span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">heroJSON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'{"name":"Max","car":"V8"}'</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">heroObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">heroJSON</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">heroClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">Hero</span><span class="p">,</span><span class="w"> </span><span class="nx">heroObject</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">heroObject</span><span class="p">,</span><span class="w"> </span><span class="nx">heroClass</span><span class="p">);</span>
<span class="linenos" data-linenos="12 "></span><span class="p">})();</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>{ name: "Max", car: "V8" } Hero { name: "Max", car: "V8" }
</code></pre></div>
<p>En este ejemplo:
1. <strong>Definimos una clase <code>Hero</code></strong> que tiene un constructor que inicializa el nombre y el coche del héroe.
2. <strong>Creamos una cadena JSON</strong> que representa un héroe.
3. <strong>Convertimos la cadena JSON en un objeto</strong> usando <code>JSON.parse</code>.
4. <strong>Asignamos las propiedades del objeto JSON</strong> a una nueva instancia de <code>Hero</code> usando <code>Object.assign</code>.
5. <strong>Imprimimos el objeto JSON y la instancia de <code>Hero</code></strong> en la consola.</p>
<p>El resultado en la consola mostrará el objeto plano y la instancia de <code>Hero</code> con las propiedades correspondientes.</p>
<h3 id="conversion-de-binarios-para-enviar-como-json">Conversión de binarios para enviar como JSON<a class="headerlink" href="#conversion-de-binarios-para-enviar-como-json" title="Permanent link">¶</a></h3>
<p>Si se necesita enviar un binario dentro de un mensaje JSON, podemos convertirlo a Base64:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'fileForm'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'submit'</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">fileInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'fileInput'</span><span class="p">);</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FileReader</span><span class="p">();</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">    </span><span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'loadend'</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">base64String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'data:'</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^.+,/</span><span class="p">,</span><span class="w"> </span><span class="s1">''</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">jsonData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="w">            </span><span class="nx">fileName</span><span class="o">:</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
<span class="linenos" data-linenos="11 "></span><span class="w">            </span><span class="nx">fileType</span><span class="o">:</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
<span class="linenos" data-linenos="12 "></span><span class="w">            </span><span class="nx">fileData</span><span class="o">:</span><span class="w"> </span><span class="nx">base64String</span>
<span class="linenos" data-linenos="13 "></span><span class="w">        </span><span class="p">};</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="w">        </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">'/upload-json'</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="16 "></span><span class="w">            </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">'POST'</span><span class="p">,</span>
<span class="linenos" data-linenos="17 "></span><span class="w">            </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="18 "></span><span class="w">                </span><span class="s1">'Content-Type'</span><span class="o">:</span><span class="w"> </span><span class="s1">'application/json'</span>
<span class="linenos" data-linenos="19 "></span><span class="w">            </span><span class="p">},</span>
<span class="linenos" data-linenos="20 "></span><span class="w">            </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">)</span>
<span class="linenos" data-linenos="21 "></span><span class="w">        </span><span class="p">})</span>
<span class="linenos" data-linenos="22 "></span><span class="w">        </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="linenos" data-linenos="23 "></span><span class="w">        </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="linenos" data-linenos="24 "></span><span class="w">        </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Error:'</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">));</span>
<span class="linenos" data-linenos="25 "></span><span class="w">    </span><span class="p">});</span>
<span class="linenos" data-linenos="26 "></span>
<span class="linenos" data-linenos="27 "></span><span class="w">    </span><span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="linenos" data-linenos="28 "></span><span class="p">});</span>
</code></pre></div>
<h2 id="almacenamiento-en-el-lado-del-cliente">Almacenamiento en el Lado del Cliente<a class="headerlink" href="#almacenamiento-en-el-lado-del-cliente" title="Permanent link">¶</a></h2>
<h3 id="cookies">Cookies<a class="headerlink" href="#cookies" title="Permanent link">¶</a></h3>
<p>Las cookies son pequeños fragmentos de datos almacenados en el navegador del usuario. Son útiles para almacenar información persistente que debe enviarse con cada solicitud HTTP al servidor, como sesiones de usuario.</p>
<h4 id="ejemplo">Ejemplo<a class="headerlink" href="#ejemplo" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"username=John Doe; expires=Thu, 18 Dec 2021 12:00:00 UTC; path=/;"</span><span class="p">;</span>
</code></pre></div>
<p>En este ejemplo:
1. <strong>Creamos una cookie</strong> llamada <code>username</code> con el valor <code>John Doe</code>.
2. <strong>Establecemos una fecha de expiración</strong> para la cookie.
3. <strong>Definimos el <code>path</code></strong> para especificar la ruta en la que la cookie está disponible.</p>
<h3 id="manipular-cookies">Manipular Cookies<a class="headerlink" href="#manipular-cookies" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="kd">var</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">;</span><span class="w">  </span><span class="c1">// Leer todas las cookies</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"username=John Smith; expires=Thu, 18 Dec 2021 12:00:00 UTC; path=/;"</span><span class="p">;</span><span class="w">  </span><span class="c1">// Modificar una cookie</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"</span><span class="p">;</span><span class="w">  </span><span class="c1">// Borrar una cookie</span>
</code></pre></div>
<p>En este ejemplo:
1. <strong>Leemos todas las cookies</strong> disponibles.
2. <strong>Modificamos la cookie <code>username</code></strong>.
3. <strong>Borramos la cookie <code>username</code></strong> estableciendo una fecha de expiración pasada.</p>
<p>Para una gestión más avanzada de cookies, se recomienda utilizar las funciones proporcionadas por la W3C: <a href="https://www.w3schools.com/js/js_cookies.asp">W3Schools - Cookies</a>.</p>
<h3 id="localstorage">LocalStorage<a class="headerlink" href="#localstorage" title="Permanent link">¶</a></h3>
<p>LocalStorage permite almacenar datos en el navegador de forma persistente. Los datos persisten incluso después de cerrar el navegador.</p>
<h4 id="ejemplo_1">Ejemplo<a class="headerlink" href="#ejemplo_1" title="Permanent link">¶</a></h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">// Guardar</span>
<span class="linenos" data-linenos="2 "></span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">"lastname"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// Obtener</span>
<span class="linenos" data-linenos="4 "></span><span class="kd">var</span><span class="w"> </span><span class="nx">lastname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"lastname"</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">// Borrar</span>
<span class="linenos" data-linenos="6 "></span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s2">"lastname"</span><span class="p">);</span>
</code></pre></div>
<p>En este ejemplo:
1. <strong>Guardamos un valor</strong> con la clave <code>lastname</code> en LocalStorage.
2. <strong>Recuperamos el valor</strong> almacenado usando la clave <code>lastname</code>.
3. <strong>Eliminamos el valor</strong> asociado a la clave <code>lastname</code>.</p>
<h3 id="indexeddb">IndexedDB<a class="headerlink" href="#indexeddb" title="Permanent link">¶</a></h3>
<p>IndexedDB es una API de bajo nivel para almacenar grandes cantidades de datos estructurados. Es una base de datos transaccional y asíncrona que permite almacenar archivos y realizar búsquedas avanzadas.</p>
<h4 id="caracteristicas-de-indexeddb">Características de IndexedDB<a class="headerlink" href="#caracteristicas-de-indexeddb" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Hasta 50MB</strong> de almacenamiento.</li>
<li><strong>API asíncrona</strong> para operaciones de lectura y escritura.</li>
<li><strong>Transaccional</strong> para garantizar la integridad de los datos.</li>
<li><strong>Más compleja</strong> que LocalStorage.</li>
</ul>
<h3 id="ejemplo-basico-de-indexeddb">Ejemplo Básico de IndexedDB<a class="headerlink" href="#ejemplo-basico-de-indexeddb" title="Permanent link">¶</a></h3>
<p>IndexedDB es más compleja de manejar que LocalStorage o cookies, pero ofrece muchas más capacidades. Aquí presentamos un ejemplo muy básico para ilustrar su uso:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="kd">let</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">indexedDB</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">"myDatabase"</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="nx">request</span><span class="p">.</span><span class="nx">onupgradeneeded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">objectStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">createObjectStore</span><span class="p">(</span><span class="s2">"customers"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">keyPath</span><span class="o">:</span><span class="w"> </span><span class="s2">"id"</span><span class="w"> </span><span class="p">});</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">  </span><span class="nx">objectStore</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">unique</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">});</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">  </span><span class="nx">objectStore</span><span class="p">.</span><span class="nx">createIndex</span><span class="p">(</span><span class="s2">"email"</span><span class="p">,</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">unique</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">};</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="11 "></span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">transaction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">db</span><span class="p">.</span><span class="nx">transaction</span><span class="p">([</span><span class="s2">"customers"</span><span class="p">],</span><span class="w"> </span><span class="s2">"readwrite"</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">objectStore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">transaction</span><span class="p">.</span><span class="nx">objectStore</span><span class="p">(</span><span class="s2">"customers"</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">objectStore</span><span class="p">.</span><span class="nx">add</span><span class="p">({</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w"> </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="s2">"john.doe@example.com"</span><span class="w"> </span><span class="p">});</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="w">  </span><span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="17 "></span><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Customer added to the database"</span><span class="p">);</span>
<span class="linenos" data-linenos="18 "></span><span class="w">  </span><span class="p">};</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span><span class="w">  </span><span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="21 "></span><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error adding customer: "</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="linenos" data-linenos="22 "></span><span class="w">  </span><span class="p">};</span>
<span class="linenos" data-linenos="23 "></span><span class="p">};</span>
</code></pre></div>
<p>En este ejemplo:
1. <strong>Abrimos una conexión a IndexedDB</strong> y, si es la primera vez, se crea o actualiza la base de datos.
2. <strong>Definimos un <code>objectStore</code></strong> para almacenar datos de clientes con un índice para <code>name</code> y <code>email</code>.
3. <strong>Añadimos un cliente</strong> a la base de datos dentro de una transacción y manejamos los eventos de éxito y error.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>
</code></pre></div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Darrera actualització">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">8 de gener de 2025</span>
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2025 Xavier Sastre - Llicencia CC BY-NC-SA <a href="#__consent">Canvia configuració de les galetes</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  





<h4>Consentiment ús galetes</h4>
<p>Utilitzem galetes per reconèixer les vostres visites, així com mesurar l'eficàcia de la nostra documentació i si els usuaris troben allò que estan buscant. Amb el teu consentiment, ens ajudes a millorar la nostra documentació.</p>
<input class="md-toggle" type="checkbox" id="__settings">
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
          
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accepta</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Rebutja</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Gestiona la configuració</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "toc.integrate", "content.tabs.link", "content.tooltips", "content.code.select", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../assets/extra.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>